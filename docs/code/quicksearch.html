<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"components_dashboard_Chart.js.html":{"id":"components_dashboard_Chart.js.html","title":"Source: components/dashboard/Chart.js","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Source: components/dashboard/Chart.js import React, { useState, useEffect } from 'react' import { LineChart, Line, XAxis, YAxis, Label, ResponsiveContainer } from 'recharts' import moment from 'moment' /* const formatter = new Intl.NumberFormat('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) */ /** * @author Eduardo Perotta de Almeida &lt;web2solucoes@gmail.com&gt; * @Component Chart * @description React component consuming a Order Data Entity collection to feed a grid * @extends React.Component */ class Chart extends React.Component { constructor (props) { super(props) // console.error('------&gt;', props) this.entity = 'Order' this.foundation = props.foundation this.state = { series: [ { time: '00:00', amount: 0 }, { time: '24:00', amount: undefined } ] } this.onAddDocEventListener = null this.onEditDocEventListener = null this.onDeleteDocEventListener = null this.handlerChangeOrder = this.handlerChangeOrder.bind(this) } async setSeries () { const { Order } = this.foundation.data const { error, data } = await Order.find({}) if (error) { return } let _total = 0 const series = data.reverse().map(({ date, amount }) =&gt; { _total = _total + amount return { amount: _total, time: moment(date).format('HH:mm:ss'), mseconds: new Date(date).getTime() } }) const final = [ { time: '00:00', amount: 0 }, ...series.slice().sort((a, b) =&gt; a.mseconds - b.mseconds), { time: '24:00', amount: undefined } ] // console.log(final) this.setState({ series: final }) } async handlerChangeOrder (eventObj) { console.error('handlerChangeOrder chart') const { error } = eventObj if (error) { return } await this.setSeries() } /** * @Method Chart.componentWillUnmount * @summary Called immediately before a component is destroyed. Perform any necessary cleanup in this method, such as cancelled network requests, or cleaning up any DOM elements created in componentDidMount. * @description lets stop listen to Order Data State Change Events * @example componentWillUnmount() { const { Order } = this.foundation.data Order.stopListenTo(this.onAddDocEventListener) Order.stopListenTo(this.onEditDocEventListener) Order.stopListenTo(this.onDeleteDocEventListener) } */ componentWillUnmount () { const { Order } = this.foundation.data /** * Destroy event listeners of this component which are listening to Order collection * and react to it */ Order.stopListenTo(this.onAddDocEventListener) Order.stopListenTo(this.onEditDocEventListener) Order.stopListenTo(this.onDeleteDocEventListener) this.onAddDocEventListener = null this.onEditDocEventListener = null this.onDeleteDocEventListener = null } /** * @async * @Method Chart.componentDidMount * @summary Called immediately after a component is mounted. Setting state here will trigger re-rendering. * @description Once component is monted we are now ready to start listen to changes on Order data entity and get a list of order in database to fill out the state.orders * @example componentDidMount() { const { Order } = this.foundation.data // listen to add, edit and delete events on Order collection // and react to it this.onAddDocEventListener = Order.on('add', this.handlerChangeOrder) this.onEditDocEventListener = Order.on('edit', this.handlerChangeOrder) this.onDeleteDocEventListener = Order.on('delete', this.handlerChangeOrder) await this.setSeries() } */ async componentDidMount () { const { Order } = this.foundation.data // listen to add, edit and delete events on Order collection // and react to it /** * listen to add Order Data Entity change event on Data API */ this.onAddDocEventListener = Order.on('add', this.handlerChangeOrder) /** * listen to edit Order Data Entity change event on Data API */ this.onEditDocEventListener = Order.on('edit', this.handlerChangeOrder) /** * listen to delete Order Data Entity change event on Data API */ this.onDeleteDocEventListener = Order.on('delete', this.handlerChangeOrder) await this.setSeries() } render () { return ( &lt;&gt; &lt;ResponsiveContainer height={300}&gt; &lt;LineChart data={this.state.series} margin={{ top: 16, right: 16, bottom: 0, left: 24 }} &gt; &lt;XAxis dataKey='time' stroke='#cccccc' /&gt; &lt;YAxis stroke='#cccccc'&gt; &lt;Label angle={270} position='left' style={{ textAnchor: 'middle', fill: '#000000' }} &gt; Sales ($) &lt;/Label&gt; &lt;/YAxis&gt; &lt;Line type='monotone' dataKey='amount' stroke='#000000' dot={false} /&gt; &lt;/LineChart&gt; &lt;/ResponsiveContainer&gt; &lt;/&gt; ) } } export default Chart × Search results Close Sponsored by WEB2 Solutions "},"components_customers_index.js.html":{"id":"components_customers_index.js.html","title":"Source: components/customers/index.js","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Source: components/customers/index.js /* globals */ import React from 'react' import { Link, Redirect } from 'react-router-dom' import { LinkContainer } from 'react-router-bootstrap' import swal from 'sweetalert' /* import moment from 'moment' const formatter = new Intl.NumberFormat('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) */ const handlerOnAddDocEventListener = function (eventObj) { const { error, /* document, foundation, */ data } = eventObj if (error) { console.error(`Error adding user: ${error}`) return } console.debug([data, ...this.state.customers]) this.setState({ customers: [data, ...this.state.customers] }) } const handlerOnEditDocEventListener = function (eventObj) { const { data, primaryKey, /* document, foundation, */ error } = eventObj if (error) { console.error(`Error updating user: ${error}`) return } const newData = this.state.customers.map((customer) =&gt; { if (customer.__id === primaryKey) { return data } else { return customer } }) console.debug([...newData]) this.setState({ customers: [...newData] }) } const handlerOnDeleteDocEventListener = function (eventObj) { const { error, /* document, foundation, */ data } = eventObj if (error) { console.error(`Error deleting user: ${error}`) return } const allCustomers = [...this.state.customers] for (let x = 0; x &lt; allCustomers.length; x++) { const customer = allCustomers[x] if (customer.__id === data.__id) { allCustomers.splice(x) } } this.setState({ customers: allCustomers }) } /** * @author Eduardo Perotta de Almeida &lt;web2solucoes@gmail.com&gt; * @Component Customers * @description React component consuming a Customer Data Entity collection to feed a grid * @extends React.Component */ class Customers extends React.Component { constructor (props) { super(props) // console.error('------&gt;', props) /** * Entity name which this component represents to */ this.entity = 'Customer' /** * access to foundation instance */ this.foundation = props.foundation /** * default pagination to list data */ this.pagination = { offset: 0, limit: 30 } /** * component state */ this.state = { customers: [] } this.onAddDocEventListener = null this.onEditDocEventListener = null this.onDeleteDocEventListener = null this.handleDeleteCustomer = this.handleDeleteCustomer.bind(this) } /** * @Method Customers.componentWillUnmount * @summary Called immediately before a component is destroyed. Perform any necessary cleanup in this method, such as cancelled network requests, or cleaning up any DOM elements created in componentDidMount. * @description lets stop listen to Customer Data State Change Events * @example componentWillUnmount() { const { Customer } = this.foundation.data Customer.stopListenTo(this.onAddDocEventListener) Customer.stopListenTo(this.onEditDocEventListener) Customer.stopListenTo(this.onDeleteDocEventListener) } */ componentWillUnmount () { const { Customer } = this.foundation.data /** * Destroy event listeners of this component which are listening to Customer collection * and react to it */ Customer.stopListenTo(this.onAddDocEventListener) Customer.stopListenTo(this.onEditDocEventListener) Customer.stopListenTo(this.onDeleteDocEventListener) this.onAddDocEventListener = null this.onEditDocEventListener = null this.onDeleteDocEventListener = null } /** * @async * @Method Customers.componentDidMount * @summary Called immediately after a component is mounted. Setting state here will trigger re-rendering. * @description Once component is monted we are now ready to start listen to changes on Customer data entity and get a list of customer in database to fill out the state.customers * @example componentDidMount() { const { Customer } = this.foundation.data this.onAddDocEventListener = Customer.on( 'add', handlerOnAddDocEventListener.bind(this) ) this.onEditDocEventListener = Customer.on( 'edit', handlerOnEditDocEventListener.bind(this) ) this.onDeleteDocEventListener = Customer.on( 'delete', handlerOnDeleteDocEventListener.bind(this) ) const { error, data } = await Customer.find({}, { ...this.pagination }) if (!error) { this.setState({ customers: customers.data }) } } */ async componentDidMount () { const { Customer } = this.foundation.data // listen to add, edit and delete events on Customer collection // and react to it /** * listen to add Customer Data Entity change event on Data API */ this.onAddDocEventListener = Customer.on('add', handlerOnAddDocEventListener.bind(this)) /** * listen to edit Customer Data Entity change event on Data API */ this.onEditDocEventListener = Customer.on('edit', handlerOnEditDocEventListener.bind(this)) /** * listen to delete Customer Data Entity change event on Data API */ this.onDeleteDocEventListener = Customer.on('delete', handlerOnDeleteDocEventListener.bind(this)) // get Customers on database const customers = await Customer.find({}, { ...this.pagination }) // console.warn(customers) if (customers.data) { this.setState({ customers: customers.data }) } } /** * @Method Customers.handleDeleteCustomer * @summary Event handler that Deletes a customer * @description Once component is monted we are now ready to start listen to changes on Customer data entity and get a list of customer in database to fill out the state.customers * @param {event} event - The HTML event triggered on User interation * @param {number} __id - The primaryKey value of the record willing to be deleted * @example handleDeleteCustomer(e, ___id) { const { Customer } = this.foundation.data e.preventDefault() swal({ title: 'Are you sure?', text: 'Once deleted, you will not be able to recover this!', icon: 'warning', buttons: true, dangerMode: true }).then(async (willDelete) =&gt; { if (willDelete) { const r = await Customer.delete(___id) if (r.error) { swal('Database error', e.error.message, 'error') return } swal('Poof! The customer has been deleted!', { icon: 'success' }) return &lt;Redirect to = '/dashboard' / &gt; } else { swal('The Customer is safe!') } }) } // &lt;a color='primary' href='#' onClick={e =&gt; this.handleDeleteCustomer(e, doc.__id)}&gt;[delete]&lt;/a&gt; */ handleDeleteCustomer (e, ___id) { const { Customer } = this.foundation.data e.preventDefault() // console.error(___id) swal({ title: 'Are you sure?', text: 'Once deleted, you will not be able to recover this!', icon: 'warning', buttons: true, dangerMode: true }).then(async (willDelete) =&gt; { if (willDelete) { const r = await Customer.delete(___id) // console.error(r) if (r.error) { swal('Database error', e.error.message, 'error') return } swal('Poof! The customer has been deleted!', { icon: 'success' }) return &lt;Redirect to='/dashboard' /&gt; } else { swal('The Customer is safe!') } }) } /** * @async * @Method Customers.render * @summary Component render function. * @description Renders a grid of Customers */ render () { return ( &lt;main className='col-md-9 ms-sm-auto col-lg-10 px-md-4 main'&gt; &lt;div className='d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 bcustomer-bottom'&gt; &lt;h1 className='h2'&gt;Customers&lt;/h1&gt; &lt;div className='btn-toolbar mb-2 mb-md-0'&gt; &lt;div className='btn-group me-2'&gt; &lt;LinkContainer to='/CustomersAdd'&gt; &lt;button type='button' className='btn btn-sm btn-outline-secondary'&gt; Add new Customer &lt;/button&gt; &lt;/LinkContainer&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;div className='table-responsive'&gt; &lt;table className='table table-striped table-sm'&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;Name&lt;/th&gt; &lt;th&gt;Address&lt;/th&gt; &lt;th&gt;E-mail&lt;/th&gt; &lt;th align='right'&gt;Cards&lt;/th&gt; &lt;th&gt;-&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; {this.state.customers.map((doc) =&gt; ( &lt;tr key={doc.id}&gt; &lt;td&gt;{doc.name}&lt;/td&gt; &lt;td&gt;{doc.address}&lt;/td&gt; &lt;td&gt;{doc.email}&lt;/td&gt; &lt;td align='right'&gt;{doc.cards}&lt;/td&gt; &lt;td&gt; &lt;Link color='primary' to={`/CustomersEdit/${doc.__id}`}&gt;[edit]&lt;/Link&gt; | &lt;a color='primary' href='#' onClick={e =&gt; this.handleDeleteCustomer(e, doc.__id)}&gt;[delete]&lt;/a&gt; &lt;/td&gt; &lt;/tr&gt; ))} &lt;/tbody&gt; &lt;/table&gt; &lt;/div&gt; &lt;/main&gt; ) } } export default Customers × Search results Close Sponsored by WEB2 Solutions "},"components_customers_CustomersAdd.js.html":{"id":"components_customers_CustomersAdd.js.html","title":"Source: components/customers/CustomersAdd.js","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Source: components/customers/CustomersAdd.js /* globals document */ import React from 'react' import { Redirect } from 'react-router-dom' // import { LinkContainer } from 'react-router-bootstrap' // import swal from 'sweetalert' // import moment from 'moment' import swal from 'sweetalert' /* const formatter = new Intl.NumberFormat('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) */ const customerObj = { name: '', address: 'Seminole, FL', email: '', cards: [] } /** * @author Eduardo Perotta de Almeida &lt;web2solucoes@gmail.com&gt; * @Component CustomersAdd * @description React component that creates new a Customer into the database * @extends React.Component */ class CustomersAdd extends React.Component { constructor (props) { super(props) /** * Entity name which this component represents to */ this.entity = 'Customer' /** * access to foundation instance */ this.foundation = props.foundation /** * default pagination to list data */ this.pagination = { offset: 0, limit: 30 } /** * component state */ this.state = { customer: { ...customerObj }, cards: ['VISA ⠀*** 3719'], toDashboard: false } this.form = null this.handleFormSubmit = this.handleFormSubmit.bind(this) this.handleChangeFieldValue = this.handleChangeFieldValue.bind(this) } async componentDidMount () { if (!this.state.toDashboard) { this.form = document.querySelectorAll('.needs-validation')[0] this.form.addEventListener('submit', this.handleFormSubmit, false) } } /** * @Method CustomersAdd.handleChangeFieldValue * @summary Event handler that change form field values and set it state * @param {event} event - The HTML event triggered on User interation * @example handleChangeFieldValue(e) { const newHash = { ...this.state.customer } const name = e.target.id || e.target.name const value = e.target.value newHash[name] = value if (name === 'cards') { if (value !== '') { newHash[name] = [value] } else { newHash[name] = [] } } this.setState({ customer: newHash }) } */ handleChangeFieldValue (e) { // e.preventDefault() const newHash = { ...this.state.customer } const name = e.target.id || e.target.name const value = e.target.value newHash[name] = value if (name === 'cards') { if (value !== '') { newHash[name] = [value] } else { newHash[name] = [] } } // console.error('newHash', newHash) this.setState({ customer: newHash }) } /** * @async * @Method CustomersAdd.handleFormSubmit * @summary Event handler that handles the form submission * @param {event} event - The HTML event triggered on User interation * @example async handleFormSubmit(e) { const { Customer } = this.foundation.data if (!this.form.checkValidity()) { // console.log('not validated') } e.preventDefault() e.stopPropagation() this.form.classList.add('was-validated') const doc = { ...this.state.customer } const { data, error } = await Customer.add(doc) if (error) { swal('Database error', error.message, 'error') return } this.setState({ toDashboard: true }) } */ async handleFormSubmit (e) { e.preventDefault() e.stopPropagation() const { Customer } = this.foundation.data if (!this.form.checkValidity()) { // console.log('not validated') } this.form.classList.add('was-validated') const doc = { ...this.state.customer } const { /* data, */ error } = await Customer.add(doc) if (error) { swal('Database error', error.message, 'error') return } this.setState({ toDashboard: true }) } /** * @async * @Method CustomersAdd.render * @summary Component render function. * @description Renders a form to create the Customer data */ render () { if (this.state.toDashboard === true) { return &lt;Redirect to='/Customers' /&gt; } return ( &lt;main className='col-md-9 ms-sm-auto col-lg-10 px-md-4 main'&gt; &lt;div className='d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 bcustomer-bottom'&gt; &lt;h1 className='h2'&gt;Customer Add&lt;/h1&gt; &lt;/div&gt; &lt;div className='table-responsive'&gt; &lt;form className='needs-validation' noValidate&gt; &lt;div className='row g-3'&gt; &lt;div className='col-12'&gt; &lt;label htmlFor='name' className='form-label'&gt;Name&lt;/label&gt; &lt;input type='text' className='form-control' id='name' placeholder='' value={this.state.customer.name} required onChange={this.handleChangeFieldValue} /&gt; &lt;div className='invalid-feedback'&gt; Valid name is required. &lt;/div&gt; &lt;/div&gt; &lt;div className='col-12'&gt; &lt;label htmlFor='email' className='form-label'&gt;Email &lt;/label&gt; &lt;input type='email' className='form-control' id='email' placeholder='you@example.com' required value={this.state.customer.email} onChange={this.handleChangeFieldValue} /&gt; &lt;div className='invalid-feedback'&gt; Please enter a valid email address for shipping updates. &lt;/div&gt; &lt;/div&gt; &lt;div className='col-12'&gt; &lt;label htmlFor='address' className='form-label'&gt;Address&lt;/label&gt; &lt;input type='text' className='form-control' id='address' placeholder='1234 Main St' required value={this.state.customer.address} onChange={this.handleChangeFieldValue} /&gt; &lt;div className='invalid-feedback'&gt; Please enter your address. &lt;/div&gt; &lt;/div&gt; &lt;div className='col-md-5'&gt; &lt;label htmlFor='cards' className='form-label'&gt;Credit cards&lt;/label&gt; &lt;select className='custom-select' id='cards' required onChange={this.handleChangeFieldValue} &gt; &lt;option value=''&gt;Choose...&lt;/option&gt; {this.state.cards.map((card) =&gt; ( &lt;option key={card} value={card} &gt; {card} &lt;/option&gt; ))} &lt;/select&gt; &lt;div className='invalid-feedback'&gt; Please select a valid credit card. &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;hr className='my-4' /&gt; &lt;button className='w-100 btn btn-primary btn-lg' type='submit'&gt;save&lt;/button&gt; &lt;/form&gt; &lt;/div&gt; &lt;/main&gt; ) } } export default CustomersAdd × Search results Close Sponsored by WEB2 Solutions "},"components_customers_CustomersEdit.js.html":{"id":"components_customers_CustomersEdit.js.html","title":"Source: components/customers/CustomersEdit.js","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Source: components/customers/CustomersEdit.js /* globals document */ import React from 'react' import { Redirect, useParams } from 'react-router-dom' // import { LinkContainer } from 'react-router-bootstrap' // import swal from 'sweetalert' // import moment from 'moment' import swal from 'sweetalert' /* const formatter = new Intl.NumberFormat('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) */ const customerObj = { __id: null, _id: null, name: '', address: 'Seminole, FL', email: '', cards: [] } /** * @author Eduardo Perotta de Almeida &lt;web2solucoes@gmail.com&gt; * @Component CustomersEdit * @description React component that edits a Customer data by biding it to a form * @extends React.Component */ class CustomersEdit extends React.Component { #__id constructor (props) { super(props) /** * Entity name which this component represents to */ this.entity = 'Customer' /** * access to foundation instance */ this.foundation = props.foundation /** * default pagination to list data */ this.pagination = { offset: 0, limit: 30 } /** * component state */ this.state = { customer: { ...customerObj }, cards: ['VISA ⠀*** 3719'], toDashboard: false } this.#__id = null this.form = null this.handleFormSubmit = this.handleFormSubmit.bind(this) this.handleChangeFieldValue = this.handleChangeFieldValue.bind(this) } /** * @async * @Method CustomersEdit.componentDidMount * @summary Called immediately after a component is mounted. Setting state here will trigger re-rendering. * @description Once component is monted we are now ready to get the desired Customer data in database and bind to state.customer * @example async componentDidMount() { if (!this.state.toDashboard) { this.form = document.querySelectorAll('.needs-validation')[0] this.form.addEventListener('submit', this.handleFormSubmit, false) } const { match: { params } } = this.props const { Customer } = this.foundation.data const { __id } = params this.#__id = __id const findCustomer = await Customer.findById(this.#__id) if (findCustomer.error) { console.error('findCustomer.error', findCustomer.error) return } if (findCustomer.data) { this.setState({ customer: findCustomer.data }) } } */ async componentDidMount() { if (!this.state.toDashboard) { this.form = document.querySelectorAll('.needs-validation')[0] this.form.addEventListener('submit', this.handleFormSubmit, false) } const { match: { params } } = this.props const { Customer } = this.foundation.data const { __id } = params this.#__id = __id const findCustomer = await Customer.findById(this.#__id) if (findCustomer.error) { console.error('findCustomer.error', findCustomer.error) return } if (findCustomer.data) { this.setState({ customer: findCustomer.data }) } } /** * @Method CustomersEdit.handleChangeFieldValue * @summary Event handler that change form field values and set it state * @param {event} event - The HTML event triggered on User interation * @example handleChangeFieldValue(e) { const newHash = { ...this.state.customer } const name = e.target.id || e.target.name const value = e.target.value newHash[name] = value if (name === 'cards') { if (value !== '') { newHash[name] = [value] } else { newHash[name] = [] } } this.setState({ customer: newHash }) } */ handleChangeFieldValue (e) { const newHash = { ...this.state.customer } const name = e.target.id || e.target.name const value = e.target.value newHash[name] = value if (name === 'cards') { if (value !== '') { newHash[name] = [value] } else { newHash[name] = [] } } this.setState({ customer: newHash }) } /** * @async * @Method CustomersEdit.handleFormSubmit * @summary Event handler that handles the form submission * @param {event} event - The HTML event triggered on User interation * @example async handleFormSubmit(e) { const { Customer } = this.foundation.data if (!this.form.checkValidity()) { // console.log('not validated') } e.preventDefault() e.stopPropagation() this.form.classList.add('was-validated') const doc = { ...this.state.customer } const { data, error } = await Customer.edit(this.#__id, doc) if (error) { swal('Database error', error.message, 'error') return } this.setState({ toDashboard: true }) } */ async handleFormSubmit(e) { e.preventDefault() e.stopPropagation() const { Customer } = this.foundation.data if (!this.form.checkValidity()) { // console.log('not validated') } this.form.classList.add('was-validated') const doc = { ...this.state.customer } const { data, error } = await Customer.edit(this.#__id, doc) if (error) { swal('Database error', error.message, 'error') return } this.setState({ toDashboard: true }) } /** * @async * @Method CustomersEdit.render * @summary Component render function. * @description Renders a form to edit the Customer data */ render () { if (this.state.toDashboard === true) { return &lt;Redirect to='/Customers' /&gt; } return ( &lt;main className='col-md-9 ms-sm-auto col-lg-10 px-md-4 main'&gt; &lt;div className='d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 bcustomer-bottom'&gt; &lt;h1 className='h2'&gt;Customer Edit - {this.state.customer.name}&lt;/h1&gt; &lt;/div&gt; &lt;div className='table-responsive'&gt; &lt;form className='needs-validation' noValidate&gt; &lt;div className='row g-3'&gt; &lt;div className='col-12'&gt; &lt;label htmlFor='name' className='form-label'&gt;Name&lt;/label&gt; &lt;input type='text' className='form-control' id='name' placeholder='' value={this.state.customer.name} required onChange={this.handleChangeFieldValue} /&gt; &lt;div className='invalid-feedback'&gt; Valid name is required. &lt;/div&gt; &lt;/div&gt; &lt;div className='col-12'&gt; &lt;label htmlFor='email' className='form-label'&gt;Email &lt;/label&gt; &lt;input type='email' className='form-control' id='email' placeholder='you@example.com' required value={this.state.customer.email} onChange={this.handleChangeFieldValue} /&gt; &lt;div className='invalid-feedback'&gt; Please enter a valid email address for shipping updates. &lt;/div&gt; &lt;/div&gt; &lt;div className='col-12'&gt; &lt;label htmlFor='address' className='form-label'&gt;Address&lt;/label&gt; &lt;input type='text' className='form-control' id='address' placeholder='1234 Main St' required value={this.state.customer.address} onChange={this.handleChangeFieldValue} /&gt; &lt;div className='invalid-feedback'&gt; Please enter your address. &lt;/div&gt; &lt;/div&gt; &lt;div className='col-md-5'&gt; &lt;label htmlFor='cards' className='form-label'&gt;Credit cards&lt;/label&gt; &lt;select className='custom-select' id='cards' required multiple onChange={this.handleChangeFieldValue} value={this.state.customer.cards} &gt; &lt;option value=''&gt;Choose...&lt;/option&gt; {this.state.cards.map((card) =&gt; ( &lt;option key={card} value={card} &gt; {card} &lt;/option&gt; ))} &lt;/select&gt; &lt;div className='invalid-feedback'&gt; Please select a valid credit card. &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;hr className='my-4' /&gt; &lt;button className='w-100 btn btn-primary btn-lg' type='submit'&gt;save&lt;/button&gt; &lt;/form&gt; &lt;/div&gt; &lt;/main&gt; ) } } export default CustomersEdit × Search results Close Sponsored by WEB2 Solutions "},"foundation_DataEntity.js.html":{"id":"foundation_DataEntity.js.html","title":"Source: foundation/DataEntity.js","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Source: foundation/DataEntity.js /* global localStorage, navigator, window */ import EventSystem from './EventSystem' // import Dexie from 'dexie' import mongoose from 'mongoose' import { createMethodSignature, GUID, toJSON } from './utils' /** * @author Eduardo Perotta de Almeida &lt;web2solucoes@gmail.com&gt; * @Class DataEntity * @summary Data Entity API * @description When composing web applications using this library, we strongly believe the data design and plan should be the entry point of your software design. * &lt;br&gt;&lt;br&gt;The Entity Relationship diagram shall to be one of the initial documents you should to design before starting to write your software. * &lt;br&gt;&lt;br&gt;We assume the {@link https://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model|Entity Relationship} and {@link https://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model|Data Entity} models as technique and paradigm to design the application data. * &lt;br&gt;&lt;br&gt;If you have no idea of how agile you could to design your ER diagram, please take a look at some tools like {@Link https://www.datensen.com/data-modeling/moon-modeler-for-databases.html|Moon Modeler} * &lt;br&gt;&lt;br&gt; Every Data Entity in the system has it own encapsulated properties and methods that cares about where entity data is writen to and read from. * &lt;br&gt;&lt;br&gt; The DataEntity relies on the application instance (passed to it constructor) to access the available data transports. * &lt;br&gt;It means you can not use DataEntity prior starting a data transport layer. * &lt;br&gt;&lt;br&gt; This class is not for direct usage in your project, unless you are a core developer or want to understand what happens behind the scenes, you should consider to take a look at the {@link Foundation} class. * @extends EventSystem * @param {object} DataEntityConfig - Data Entity configuration * @param {string} DataEntityConfig.foundation - Provide Accesss to Foundation scope * @param {string} DataEntityConfig.entity - Data entity name which this dataEntity instance is handling * @param {boolean} DataEntityConfig.strategy - Data transport strategy * @param {boolean} DataEntityConfig.schema - Data schema for this Data Entity abstraction. &lt;br&gt; Do not declare the params __id and _id inside your schemas. * @example import { Schema } from '../foundation/Foundation' const schema = new Schema({ // do not declare __id // do not declare _id name: { type: String, required: true, index: true }, address: { type: String, required: true, index: true }, email: { type: String, required: true, index: true }, cards: { type: [], required: true } }) const Customer = new DataEntity({ foundation, // Foundation instance, object entity: 'Customer', // entity name, string strategy: 'offline', // data strategy, string schema // data schema, a mongoose like schema }) // listen to add Customer Data event on Data API const onAddDocEventListener = Customer.on( 'add', function(eventObj){ const { error, document, foundation, data } = eventObj // do something like to update the component View state Based On Information from Incoming Event component.setState({ propertyName: newValue }) // React: component.$set(component.data, 'propertyName', newValue) // Vue: } ) // listen to edit Customer Data event on Data API const onEditDocEventListener = Customer.on( 'edit', function (eventObj) { const { error, document, foundation, data } = eventObj // do something like to update the component View state Based On Information from Incoming Event component.setState({ propertyName: newValue }) // React: component.$set(component.data, 'propertyName', newValue) // Vue: } ) // listen to delete Customer Data event on Data API const onDeleteDocEventListener = Customer.on( 'delete', function (eventObj) { const { error, document, foundation, data } = eventObj // do something like to update the component View state Based On Information from Incoming Event component.setState({ propertyName: newValue }) // React: component.$set(component.data, 'propertyName', newValue) // Vue: } ) // Stop to listen to events to avoid memory leak or others kind of problems // like to change the state of an unmounted component. // Do something like this -&gt; before component unmount OR before window unload Customer.stopListenTo(onAddDocEventListener) Customer.stopListenTo(onEditDocEventListener) Customer.stopListenTo(onDeleteDocEventListener) */ export default class DataEntity extends EventSystem { #_foundation #_entity #_strategy #_schema #_pagination #_stateChangeStorageName constructor ({ foundation, entity, strategy, schema } = {}) { super() this.#_entity = entity this.#_strategy = strategy // offlineFirst, onlineFirst, offline, online this.#_schema = schema this.#_foundation = foundation this.#_pagination = { offset: 0, limit: 30 } this.#_stateChangeStorageName = `__$tabEntityStateChange_${this.#_entity}` this.#_foundation.localDatabaseTransport.addSchema(this.#_entity, this.#_schema) this.#_listenToAllOtherSessionsStateChanges() } /** * @memberof DataEntity.entity * @member {getter} DataEntity.entity * @example console.log(DataEntity.entity) * @description Gets the entity name which which DataEntity instance is handling out * @return {object} this.#_entity */ get entity () { return this.#_entity } /** * @memberof DataEntity.schema * @member {getter} DataEntity.schema * @example console.log(DataEntity.schema) * @description Gets the data schema related to this Entity Data API * @return {object} this.#_schema */ get schema () { return this.#_schema } /** * @memberof DataEntity * @member {getter} DataEntity.strategy * @example console.log(DataEntity.strategy) * @description Gets the data strategy currently being used * @return {string} this.#_strategy */ get strategy () { return this.#_strategy } /** * @Method DataEntity.Model * @description create a Data Model based on given document * @param {object} doc - A valid document validated against mongoose schema * @param {object} schema - Mongoose based schema * @return {object} model - Mongoose document */ Model(doc, schema) { const modelSystem = mongoose.Document modelSystem.prototype.isValid = () =&gt; modelSystem.prototype.validateSync return modelSystem(doc, schema) } /** * @async * @Method DataEntity.add * @description add a new document to the storage * @param {object} doc - A valid document validated against mongoose schema * @return {object} signature - Default methods signature format { error, data } * @return {string|object} signature.error - Execution error * @return {object} signature.data - Created document * @example const doc = { name: 'Eduardo Almeida', address: 'Av. Beira Mar. Praia do Morro, Guarapari - ES. Brazil.', email: 'web2solucoes@gmail.com', cards: [] } const { data, error } = await Customer.add(doc) */ async add (doc = {}) { let data = null let error = null let rawObj = {} try { const model = new this.Model(doc, this.#_schema) const invalid = model.validateSync() if (invalid) { return createMethodSignature(invalid, data) } rawObj = toJSON(model) const __id = await this.#_foundation.localDatabaseTransport .table(this.#_entity) .add({ ...rawObj }) data = { __id, ...rawObj } } catch (e) { error = e } this.#_triggerAddEvents({ data, error, primaryKey: data.__id, rawObj }) return createMethodSignature(error, data) } /** * @Method DataEntity.#_triggerAddEvents * @description PRIVATE - Triggers all events related to 'add document' event * @param {object} eventPayload - Object containing all information about the event * @param {object} eventPayload.data - The new document inserted into database, default is null if not provided * @param {object|string} eventPayload.error - The returned error from database add request if any, default is null if not provided * @param {number} eventPayload.primaryKey - The primaryKey value of the added document, default is zero if not provided * @param {object} eventPayload.rawObj - The raw document object provided on dataEntity.add(doc) mehod call. Default is {} if not provided. */ #_triggerAddEvents({ data = null, error = null, primaryKey = 0, rawObj = {} } = {}) { const action = 'add' this.#_foundation.triggerEvent(`collection:${action}:${this.#_entity.toLowerCase()}`, { foundation: this.#_foundation, entity: this.#_entity, document: rawObj, primaryKey, data, error, }) this.triggerEvent(action, { foundation: this.#_foundation, entity: this.#_entity, document: rawObj, primaryKey, data, error, }) const state = { action, data, error, document: rawObj, primaryKey } this.#_sendStateChangeToAllOtherSessions(state) } /** * @async * @Method DataEntity.edit * @description Edit a document on the storage * @param {string|number} primaryKey - The primary key value of the desired document * @param {object} doc - A valid document validated against mongoose schema * @return {object} signature - Default methods signature format { error, data } * @return {string|object} signature.error - Execution error * @return {object} signature.data - Edited document * @example const doc = { __id: 1, _id: '601cb8d8623dc60000ee3c24', name: 'Eduardo Almeida', address: 'Av. Beira Mar. Praia do Morro, Guarapari - ES. Brazil.', email: 'web2solucoes@gmail.com', cards: [] } const { data, error } = await Customer.edit(doc.__id, doc) */ async edit(primaryKey, doc) { primaryKey = +primaryKey let data = null let error = null let rawObj = {} try { const model = new this.Model(doc, this.#_schema) const invalid = model.validateSync() if (invalid) { return createMethodSignature(invalid, data) } rawObj = toJSON(model) rawObj.__id = primaryKey console.debug('query', {primaryKey, rawObj}) const response = await this.#_foundation.localDatabaseTransport .table(this.#_entity) .put({ ...rawObj }) // .update({ __id: primaryKey }, { ...rawObj }) console.debug('response', response) data = { __id: primaryKey, ...rawObj } /* if (response.modifiedCount === 1) { data = { __id: primaryKey, ...rawObj } } else { data = null error = { message: 'Critical query error on update', response } } */ } catch (e) { console.log(e) error = e } this.#_triggerEditEvents({ data, error, primaryKey, rawObj }) return createMethodSignature(error, data) } /** * @Method DataEntity.#_triggerEditEvents * @description PRIVATE - Triggers all events related to 'edit document' event * @param {object} eventPayload - Object containing all information about the event * @param {object} eventPayload.data - The new document updated into database, default is null if not provided * @param {object|string} eventPayload.error - The returned error from database edit request if any, default is null if not provided * @param {number} eventPayload.primaryKey - The primaryKey value of the edited document, default is zero if not provided * @param {object} eventPayload.rawObj - The raw document object provided on dataEntity.edit(primaryKey, doc) mehod call. Default is {} if not provided. */ #_triggerEditEvents({ data = null, error = null, primaryKey = 0, rawObj = {} } = {}) { const action = 'edit' this.#_foundation.triggerEvent( `collection:${action}:${this.#_entity.toLowerCase()}`, { foundation: this.#_foundation, entity: this.#_entity, primaryKey, document: rawObj, data, error } ) this.triggerEvent( action, { foundation: this.#_foundation, entity: this.#_entity, primaryKey, document: rawObj, data, error } ) const state = { action, data, error, document: rawObj, primaryKey } this.#_sendStateChangeToAllOtherSessions(state) } /** * @async * @Method DataEntity.delete * @description delete a document from the storage * @param {string|number} primaryKey - The primary key value of the desired document * @return {object} signature - Default methods signature format { error, data } * @return {string|object} signature.error - Execution error * @return {object} signature.data - Deleted document */ async delete(primaryKey) { primaryKey = +primaryKey let data = null let error = null let rawObj = {} try { const __id = await this.#_foundation.localDatabaseTransport .table(this.#_entity) .delete(primaryKey) // console.error({ __id }) data = { __id: primaryKey } } catch (e) { error = e } this.#_triggerDeleteEvents({ data, error, primaryKey }) return createMethodSignature(error, data) } /** * @Method DataEntity.#_triggerDeleteEvents * @description PRIVATE - Triggers all events related to 'delete document' event * @param {object} eventPayload - Object containing all information about the event * @param {object} eventPayload.data - A object containing the __id property of the deleted document, default is null if not provided * @param {object|string} eventPayload.error - The returned error from database edit request if any, default is null if not provided * @param {number} eventPayload.primaryKey - The primaryKey value of the deleted document, default is zero if not provided */ #_triggerDeleteEvents({ data = null, error = null, primaryKey = 0 } = {}) { const action = 'delete' this.#_foundation.triggerEvent( `collection:${action}:${this.#_entity.toLowerCase()}`, { foundation: this.#_foundation, entity: this.#_entity, primaryKey, data, error } ) this.triggerEvent( action, { foundation: this.#_foundation, entity: this.#_entity, primaryKey, data, error } ) const state = { action, data, error, primaryKey } this.#_sendStateChangeToAllOtherSessions(state) } /** * @async * @Method DataEntity.findById * @description find a document from the storage by ID * @param {string|number} primaryKey - The primary key value of the desired document * @return {object} signature - Default methods signature format { error, data } * @return {string|object} signature.error - Execution error * @return {object} signature.data - Found document */ async findById (primaryKey) { let data = null let error = null try { primaryKey = parseInt(primaryKey) const doc = await this.#_foundation.localDatabaseTransport .table(this.#_entity) .get(primaryKey) // console.debug({ __id: primaryKey, doc }) if (doc) { if (doc.__id === primaryKey) { data = { __id: primaryKey, ...doc } } } } catch (e) { console.error('error', error) error = e } return createMethodSignature(error, data) } /** * @async * @Method DataEntity.findAll * @description find all documents * @return {object} signature - Default methods signature format { error, data } * @return {string|object} signature.error - Execution error * @return {array} signature.data - Array of Found documents */ async findAll(query = {}) { let data = null let error = null try { const documents = await this.#_foundation .localDatabaseTransport .collection(this.#_entity) .find(query) .toArray() data = documents } catch (e) { error = e } return createMethodSignature(error, data) } /** * @async * @Method DataEntity.find * @description find all documents based on the given query * @param {object|null} query - The query object to search documents * @param {object} pagination - Pagination object. If not provided will assume internaly set pagination. * @param {number} pagination.offset - Offset. Default 0. * @param {number} pagination.limit - Limit. Default 30. * @example User.find({ $or: [{ age: { $lt: 23, $ne: 20 } }, { lastname: { $in: ['Fox'] } }] }) * @return {object} signature - Default methods signature format { error, data } * @return {string|object} signature.error - Execution error * @return {array} signature.data - Array of Found documents */ async find(query = {}, pagination = this.#_pagination) { let { offset, limit } = pagination let data = null let error = null try { const documents = await this.#_foundation .localDatabaseTransport .collection(this.#_entity) .find(query) .reverse() .offset(offset) .limit(limit) .toArray() data = documents } catch (e) { error = e } return createMethodSignature(error, data) } /** * @async * @Method DataEntity.count * @description count all documents based on the given query * @param {object} query - The query object to count documents * @example User.count({ $or: [{ age: { $lt: 23, $ne: 20 } }, { lastname: { $in: ['Fox'] } }] }) * @return {object} signature - Default methods signature format { error, data } * @return {string|object} signature.error - Execution error * @return {number} signature.data - Documents counter */ async count (query = {}) { let data = null let error = null try { const counter = await this.#_foundation .localDatabaseTransport .collection(this.#_entity) .count(query) data = counter } catch (e) { error = e } return createMethodSignature(error, data) } /** * @Method DataEntity.#_listenToAllOtherSessionsStateChanges * @summary PRIVATE - Listen to data state changes on every Application session. * @description Listen to data state change event incoming from every other Application session and communicates to every subscriber tied to this session. * &lt;br&gt;&lt;br&gt; The application scope is the browser running the application. * &lt;br&gt;&lt;br&gt; Every tab is considered a session. * &lt;br&gt; &lt;br&gt; Internally it triggers all events related to data change events, except if the source, the session which originated the event, is the same that is receiving the event * &lt;br&gt; &lt;br&gt; It does not rely on network to propagate the changes. * @example this.#_listenToAllOtherSessionsStateChanges() */ #_listenToAllOtherSessionsStateChanges() { window.addEventListener('storage', (event) =&gt; { if (event.key === this.#_stateChangeStorageName) { const { key, newValue, oldValue } = event if (newValue) { // console.log('DATAAPI -&gt; got new state change', { key, newValue, oldValue }) const jsonState = JSON.parse(newValue) const { error, data, entity, action, source, document } = jsonState // console.error({ error, data, entity, action, source, document }) const eventObj = { foundation: this.#_foundation, entity: entity, document: document, data, error } const eventName = `collection:${action}:${entity.toLowerCase()}` this.#_foundation.triggerEvent(eventName, eventObj) this.triggerEvent(action, eventObj) } // oldValue } }) } /** * @Method DataEntity.#_sendStateChangeToAllOtherSessions * @summary PRIVATE - Sends data state changes information to every other current application session. * @description The application scope is the browser running the application. &lt;br&gt; Every tab is considered a session.&lt;br&gt; It can not rely on network. * @param {object} state - Object containing all information about the state * @param {object} state.data - The modified data, default is null if not provided * @param {object|string} state.error - The returned error when trying to modify the data, default is null if not provided * @param {object} state.document - The raw object used as value to get the new data state, default is {} if not provided * @example this.#_sendStateChangeToAllOtherSessions({ action: 'add', data: {...newDocument}, error: null, document: {...originalDocument} }) */ #_sendStateChangeToAllOtherSessions(state = { action: '', data: null, error: null, document: {} }) { state.source = { sessionId: this.#_foundation.tabId, applicationId: this.#_foundation.guid, } state.entity = this.#_entity const stateChange = JSON.stringify(state) window.localStorage.setItem(this.#_stateChangeStorageName, stateChange) window.localStorage.removeItem(this.#_stateChangeStorageName) } } × Search results Close Sponsored by WEB2 Solutions "},"foundation_Foundation.js.html":{"id":"foundation_Foundation.js.html","title":"Source: foundation/Foundation.js","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Source: foundation/Foundation.js /* global localStorage, navigator, window */ import { createMethodSignature, GUID, Schema } from './utils' import DataEntity from './DataEntity' import LocalDatabaseTransport from './LocalDatabaseTransport' import EventSystem from './EventSystem' const _workerOnMessage = function (event) { // console.error('_workerOnMessage') const { cmd /* , message */ } = event.data switch (cmd) { case 'responseClientId': this.triggerEvent('worker:responseClientId', { foundation: this, worker: this.applicationWorker, ...event.data }) break default: console.log(`Sorry, we are out of ${cmd}.`) } } /** * @author Eduardo Perotta de Almeida &lt;web2solucoes@gmail.com&gt; * @Class Foundation * @description Foundation boostrap class * @extends EventSystem * @param {object} config - Foundation configuration * @param {string} config.name - Foundation name * @param {string} config.dataStrategy - Data strategy. Recognized values: offlineFirst, onlineFirst, offline, online * @param {boolean} config.useWorker - Use a ServiceWorker in Background * @param {object} config.schemas - map of data schemas * @example {@lang javascript} // =========&gt; main.js // import React import React from 'react' import ReactDOM from 'react-dom' // import Bootstrap import 'bootstrap/dist/css/bootstrap.css' // import React app import App from './App' // import agnostic foundation foundation class import Foundation from './foundation/Foundation' const CustomerSchema = new Foundation.Schema({ name: { type: String, required: true, index: true }, address: { type: String, required: true, index: true }, email: { type: String, required: true, index: true }, cards: { type: [], required: true } }) const OrderSchema = new Foundation.Schema({ name: { type: String, required: true, index: true }, shipTo: { type: String, required: true, index: true }, paymentMethod: { type: String, required: true, index: true }, amount: { type: Number, required: true, default: 0, index: true }, date: { type: Date, default: Date.now, index: true } }) const ProductSchema = new Foundation.Schema({ name: { type: String, required: true, index: true }, vendor: { type: String, required: true, index: true }, price_cost: { type: Number, required: true, default: 0, index: true } }) const UserSchema = new Foundation.Schema({ name: { type: String, required: true }, username: { type: String, required: true } }) const foundation = new Foundation({ name: 'My App', useWorker: true, dataStrategy: 'offlineFirst', schemas: { User: UserSchema, Product: ProductSchema, Order: OrderSchema, Customer: CustomerSchema } }) foundation.on('foundation:start', function(eventObj) { const { foundation, error } = eventObj if (error) { throw new Error(`Error starting foundation stack: ${error}`) } const { User, Product } = foundation.data const Eduardo = await User.add({ name: 'Eduardo Almeida', username: 'web2' }) console.debug('Eduardo', Eduardo) const Volvo = await Product.add({ name: 'Volvo XC90', vendor: 'Volvo', price_cost: 150000 }) console.debug('Volvo', Volvo) }) // start foundation and get it ready to be used await foundation.start() const start = await foundation.start() if (start.error) { throw new Error(`Error starting foundation stack: ${start.error}`) } // console.debug('start', start) ReactDOM.render( &lt;App foundation={foundation} /&gt;, document.getElementById('root') ) */ export default class Foundation extends EventSystem { #_schemas #_name #_dataStrategy #_started #_models #_guid #_useWorker #_workers #_tabId constructor ({ name = 'My Foundation Name', dataStrategy = 'offlineFirst', useWorker = false, schemas = {} } = {}) { super() this.#_name = name this.#_dataStrategy = dataStrategy this.#_useWorker = useWorker this.#_schemas = schemas this.#_started = false this.#_guid = GUID() this.#_models = {} this.#_useWorker = useWorker || false this.#_workers = {} this.localDatabaseTransport = new LocalDatabaseTransport() this.#_tabId = GUID() // assume new Id on every refresh } /** * @member {getter} Foundation.dataStrategy * @Description Get the data strategy being used.&lt;br&gt; Possible values are: offlineFirst, onlineFirst, offline, online. &lt;br&gt; Default: offlineFirst * @example console.log(Foundation.dataStrategy) * @return {string} this.#_dataStrategy */ get dataStrategy () { return this.#_dataStrategy } /** * @member {getter} Foundation.guid * @description Get the Foundation Session guid currently being used. * @example console.log(Foundation.guid) */ get guid () { return this.#_guid } /** * @member {getter} Foundation.data * @description Get the Foundation data API(DataEntity) * @example const { User, Product } = foundation.data const Eduardo = await User.add({ name: 'Eduardo Almeida', username: 'web2' }) console.debug(Eduardo) // { // data: {__id: 1, _id: \"600e0ae8d9d7f50000e1444b\", name: \"Eduardo Almeida\", username: \"web2\", id: \"600e0ae8d9d7f50000e1444b\"} // error: null // } */ get data() { return this.#_models } /** * @member {getter} Foundation.tabId * @description Get the Browser tab ID * @example console.log(foundation.tabId) */ get tabId() { return this.#_tabId } /** * @member {getter} Foundation.name * @name Foundation.name * @description Get the Foundation name * @example console.log(Foundation.name) */ get name () { return this.#_name } /** * @member {setter} Foundation.name * @name Foundation.name * @description Set the Foundation name * @example Foundation.name = 'Provide the name here' * @param {string} name - Foundation name */ set name (name) { this.#_name = name } /** * @member {getter} Foundation.started * @description Get the start state * @example console.log(Foundation.started) */ get started () { return this.#_started } /** * @memberof Foundation * @member {getter} Foundation.applicationWorker * @example Foundation.applicationWorker.postMessage() * @description Get the Foundation worker */ get applicationWorker() { return this.#_workers.foundation } #setModel(entity = '', dataEntity = {}) { let _error = null let _data = null try { this.#_models[entity] = dataEntity _data = this.#_models[entity] } catch (error) { console.error('EROROR', error) _error = error } return createMethodSignature(_error, _data) } /** * @memberof Foundation * @member {getter} Foundation.Schema * @example new Foundation.Schema({}) * @description Creates new data schema * @returns schema creator */ static get Schema() { return Schema } #mapModels(schemas) { let _error = null let _data = null try { for (const entity in schemas) { if (Object.prototype.hasOwnProperty.call(schemas, entity)) { // console.debug('for (const entity in schemas)', entity) const strategy = 'offlineFirst' const schema = schemas[entity] const dataEntity = new DataEntity({ foundation: this, entity, strategy, schema }) this.#setModel(entity, dataEntity) } } _data = this.#_models } catch (error) { console.error(error) _error = error } return createMethodSignature(_error, _data) } /** * @member {getter} Foundation.useWorker * @Description flag if is there ServiceWorker being used * @return {boolean} */ get useWorker () { return this.#_useWorker } /** * @Method Foundation.setGuidStorage * @description save Foundation GUID to localStorage * @param {string} guid * @return Foundation GUID saved on localStorage */ setGuidStorage (guid) { localStorage.setItem('guid', guid) return localStorage.getItem('guid') } /** * @Method Foundation.getGuidStorage * @description get Foundation GUID saved on localStorage * @example foundation.getGuidStorage() * @return Foundation GUID saved on localStorage */ getGuidStorage () { return localStorage.getItem('guid') || false } /** * @Method Foundation.setupAppGuid * @description check if Foundation has a GUID saved o * @return Foundation GUID saved on localStorage */ setupAppGuid () { const guidCache = this.getGuidStorage() || false if (guidCache) { this.#_guid = guidCache } else { this.setGuidStorage(this.#_guid) } return this.getGuidStorage() } /** * @async * @Method Foundation.#registerApplicationWorker * @description Setup and Register the main Service worker used by foundation core * @return {object} signature - Default methods signature format { error, data } * @return {string|object} signature.error - Execution error * @return {object} signature.data - Worker Registration Object */ #registerApplicationWorker (workerFile = 'ServiceWorker.js') { const self = this return new Promise((resolve, reject) =&gt; { if ('serviceWorker' in navigator) { navigator.serviceWorker .register('/' + workerFile, { // scope: '/' }) .then(function (reg) { // registration worked navigator.serviceWorker.addEventListener('message', _workerOnMessage.bind(self)) if (reg.installing) { self.#_workers['foundation'] = reg.installing self.#_workers['foundation'].postMessage({ cmd: 'getClientId', message: null }) } else if (reg.active) { self.#_workers['foundation'] = reg.active self.#_workers['foundation'].postMessage({ cmd: 'getClientId', message: null }) } resolve(createMethodSignature(null, reg)) }) .catch(function (error) { // registration failed resolve(createMethodSignature(error, null)) }) } }) } /** * @async * @Method Foundation.#registerWorker * @description Setup and Register a Service worker and get it ready for usage into your application scope * @param {string} name - Worker name. Used to access it from the namespace * @param {string} workerFile - Worker file name * @return {object} signature - Default methods signature format { error, data } * @return {string|object} signature.error - Execution error * @return {object} signature.data - Worker Registration Object */ #registerWorker (name = '', workerFile = 'ServiceWorker.js') { const self = this return new Promise((resolve, reject) =&gt; { if ('serviceWorker' in navigator) { navigator.serviceWorker .register('/' + workerFile, { // scope: '/' }) .then(function (reg) { // registration worked navigator.serviceWorker.addEventListener('message', _workerOnMessage.bind(self)) if (reg.installing) { self.#_workers[name] = reg.installing self.#_workers[name].postMessage({ cmd: 'getClientId', message: null }) } else if (reg.active) { self.#_workers[name] = reg.active self.#_workers[name].postMessage({ cmd: 'getClientId', message: null }) } resolve(createMethodSignature(null, reg)) }) .catch(function (error) { // registration failed resolve(createMethodSignature(error, null)) }) } }) } /** * @Private * @description Starts foundation stack required items * @return {object} signature - Default methods signature format { error, data } * @return {string|object} signature.error - Execution error * @return {object} signature.data - Foundation data */ async #startVitals () { let _error = null let _data = null try { this.setupAppGuid() const mapModels = this.#mapModels(this.#_schemas) await this.localDatabaseTransport.connect() // start database // start all here _data = { status: { mapModels } } } catch (error) { console.error(error) _error = error } this.triggerEvent('foundation:startVitals', { foundation: this, error: _error, data: _data }) return createMethodSignature(_error, _data) } /** * @async * @Method Foundation.start * @description Starts foundation stack and get it ready to use. &lt;br&gt; it calls this.#startVitals() internally * @return {object} signature - Default methods signature format { error, data } * @return {string|object} signature.error - Execution error * @return {object} signature.data - Foundation data */ async start () { let _error = null let _data = null try { const vitals = await this.#startVitals() if (this.useWorker) { await this.#registerApplicationWorker() } this.#_started = true _data = { ...vitals.data, started: this.#_started } } catch (error) { console.error(error) _error = error } this.triggerEvent('foundation:start', { foundation: this, error: _error, data: _data }) // console.warn('STARTED&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;', this) return createMethodSignature(_error, _data) } } × Search results Close Sponsored by WEB2 Solutions "},"foundation_LocalDatabaseTransport.js.html":{"id":"foundation_LocalDatabaseTransport.js.html","title":"Source: foundation/LocalDatabaseTransport.js","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Source: foundation/LocalDatabaseTransport.js import dexie from 'dexie' import 'dexie-mongoify' import { createMethodSignature, mongooseToDexieTableString } from './utils' dexie.debug = false /** * @author Eduardo Perotta de Almeida &lt;web2solucoes@gmail.com&gt; * @Class LocalDatabaseTransport * @description Database transport for IndexedDB * @extends dexie * @see The Data Transport is set into the {@link Foundation} stack and it is consumed inside {@link DataEntity} to persist data locally. * @see {@link LocalDatabaseTransport} extends {@link https://dexie.org/docs/Dexie/Dexie|Dexie} as database handler for IndexedDB. See {@link https://dexie.org/docs/Dexie/Dexie|Dexie} * @param {object} config - Transport configuration * @param {number} config.version - Database version. &lt;br&gt;Same as IndexedDB database version. * @param {object} config.tables - Database tables. &lt;br&gt;Dexie tables configuration. * @param {string} config.dbName - Database name. &lt;br&gt;Same as IndexedDB database name. * @example {@lang javascript} import LocalDatabaseTransport from './LocalDatabaseTransport' import { Schema } from './utils' const UserSchema = new Schema({ name: { type: String, required: true }, username: { type: String, required: true } }) const ProductSchema = new Schema({ // ... }) const dbName = 'MyDatabaseName' const localDataTransport = new LocalDatabaseTransport({ version: 1, // default 1 tables: {}, // default {} dbName }) // or const localDataTransport = new LocalDatabaseTransport({ dbName }) localDataTransport.addSchema('User', UserSchema) localDataTransport.addSchema('Product', ProductSchema) await localDataTransport.connect() const Biden = await localDataTransport.table('User').add({ name: 'Joe Biden', username: 'biden'}) const Ferrari = await localDataTransport.table('Product').add({ name: 'Ferrari', vendor: 'Ferrari', price_cost: 3000000}) */ export default class LocalDatabaseTransport extends dexie { #_version #_tables #_connected #_schemas #_dbName constructor ({ version = 1, tables = {}, dbName = 'DatabaseName' } = {}) { // console.error('STARTED LocalDatabaseTransport') // run the super constructor Dexie(databaseName) to create the IndexedDB // database. super(dbName) this.#_dbName = dbName this.#_version = version this.#_tables = tables this.#_connected = false this.#_schemas = {} } #_setTables() { for (const entity in this.#_schemas) { if (Object.prototype.hasOwnProperty.call(this.#_schemas, entity)) { // console.error(entity) this.#_tables[entity] = mongooseToDexieTableString( this.#_schemas[entity] ) } } } /** * @Method LocalDatabaseTransport.addSchema * @description A a Data Schema into the Schema tree * @param {string} schemaName - The schema name. Same as Entity name. * @param {object} schema - A valid mongoose like schema * @example const UserSchema = new Schema({ name: { type: String, required: true }, username: { type: String, required: true } }) localDataTransport.addSchema('User', UserSchema) * @return {object} schema - The schema enty from inside the Schema tree */ addSchema (schemaName, schema) { this.#_schemas[schemaName] = schema return this.#_schemas[schemaName] } /** * @async * @Method LocalDatabaseTransport.connect * @description Setup connection to local database * @return Foundation GUID saved on localStorage * @example await localDataTransport.connect() * @return {object} signature - Default methods signature format { error, data } * @return {string|object} signature.error - Execution error information * @return {object} signature.data - Connection information */ async connect() { let error = null let data = null try { this.#_setTables() this .version(this.#_version) .stores(this.#_tables) // for (const tableName in this.#_tables) { // this[tableName] = this.table(tableName) // } const open = await this.open() data = open } catch (e) { error = e data = null } return createMethodSignature(error, data) } } × Search results Close Sponsored by WEB2 Solutions "},"foundation_utils.js.html":{"id":"foundation_utils.js.html","title":"Source: foundation/utils.js","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Source: foundation/utils.js import lunr from 'lunr' import mongoose from 'mongoose' /** * @author Eduardo Perotta de Almeida &lt;web2solucoes@gmail.com&gt; * @module utils * */ /** * createMethodSignature * Create default signature method object * @function * @param {string|object} error - The string or error object if have any * @param {object|array|number|string|boolean} data - Information about method execution * @return {object} signature - Default methods signature format { error, data } * @return {string|object} signature.error - Execution error * @return {object|array|number|string|boolean} signature.data - Execution data */ export const createMethodSignature = (error = null, data = null) =&gt; { return { error, data } } /** * GUID * generates a Universally unique identifier string - alias to uuid() * @function * @return {string} guid / uuid */ export const GUID = () =&gt; { return uuid() } /** * uuid * generates a Universally unique identifier string * @function * @return {string} guid / uuid */ export function uuid () { return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) { const r = (Math.random() * 16) | 0 const v = c === 'x' ? r : (r &amp; 0x3) | 0x8 return v.toString(16) }) } /** * toJSON - stringify and parse an object&lt;br&gt; It uses native JSON internally. * @function * @param {string|object} obj - Valid JSON object or string * @return {object} new JSON object */ export function toJSON (obj) { if (typeof obj === 'string') { return JSON.parse(obj) } return JSON.parse(JSON.stringify(obj)) } /** * mongooseToDexieTableString * convert given Mongoose schema to a Dexie Table columns configuration. &lt;br&gt; * All columns inside returned configuration are indexed at IndexedDB * prepend __id as local primary key and _id for remote primary key * @function * @return {string} Dexie table configuration string */ export function mongooseToDexieTableString (schema) { const cols = [] for (const propertyName in schema.paths) { if (Object.prototype.hasOwnProperty.call(schema.paths, propertyName)) { const property = schema.paths[propertyName] const { // instance, _index // , // isRequired } = property // console.debug(propertyName, property) if (propertyName === '_id' || propertyName === '__id') { continue } if (!_index) { continue } cols.push(propertyName) } } return `++__id,_id${cols.length &gt; 0 ? (',' + cols.join(',')) : ''}` } /** * getSearchTokenStream * generates a lunr search token. See {@link https://lunrjs.com/guides/searching.html|lunr search} * @function * @return {array} token */ export function getSearchTokenStream (text = '') { const index = lunr() return index.pipeline.run(lunr.tokenizer(text)) } export const Schema = mongoose.Schema × Search results Close Sponsored by WEB2 Solutions "},"components_orders_index.js.html":{"id":"components_orders_index.js.html","title":"Source: components/orders/index.js","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Source: components/orders/index.js /* globals */ import React from 'react' import { Link, Redirect } from 'react-router-dom' import { LinkContainer } from 'react-router-bootstrap' import swal from 'sweetalert' import moment from 'moment' const formatter = new Intl.NumberFormat('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) const handlerOnAddDocEventListener = function (eventObj) { console.error('handlerOnAddDocEventListener order index.js') const { error, /* document, foundation, */ data } = eventObj if (error) { console.error(`Error adding user: ${error}`) return } console.debug([data, ...this.state.orders]) this.setState({ orders: [data, ...this.state.orders] }) } const handlerOnEditDocEventListener = function (eventObj) { console.error('handlerOnEditDocEventListener order index.js') const { data, primaryKey, /* document, foundation, */ error } = eventObj if (error) { console.error(`Error updating user: ${error}`) return } const newData = this.state.orders.map((order) =&gt; { if (order.__id === primaryKey) { return data } else { return order } }) console.debug([...newData]) this.setState({ orders: [...newData] }) } const handlerOnDeleteDocEventListener = function (eventObj) { console.error('handlerOnDeleteDocEventListener order index.js') const { error, /* document, foundation, */ data } = eventObj if (error) { console.error(`Error deleting user: ${error}`) return } const allOrders = [...this.state.orders] for (let x = 0; x &lt; allOrders.length; x++) { const order = allOrders[x] if (order.__id === data.__id) { allOrders.splice(x) } } this.setState({ orders: allOrders }) } /** * @author Eduardo Perotta de Almeida &lt;web2solucoes@gmail.com&gt; * @Component Orders * @description React component consuming a Order Data Entity collection to feed a grid * @extends React.Component */ class Orders extends React.Component { constructor (props) { super(props) // console.error('------&gt;', props) /** * Entity name which this component represents to */ this.entity = 'Order' /** * access to foundation instance */ this.foundation = props.foundation /** * default pagination to list data */ this.pagination = { offset: 0, limit: 30 } /** * component state */ this.state = { orders: [] } this.onAddDocEventListener = null this.onEditDocEventListener = null this.onDeleteDocEventListener = null this.handleDeleteOrder = this.handleDeleteOrder.bind(this) } /** * @Method Orders.componentWillUnmount * @summary Called immediately before a component is destroyed. Perform any necessary cleanup in this method, such as cancelled network requests, or cleaning up any DOM elements created in componentDidMount. * @description lets stop listen to Order Data State Change Events * @example componentWillUnmount() { const { Order } = this.foundation.data Order.stopListenTo(this.onAddDocEventListener) Order.stopListenTo(this.onEditDocEventListener) Order.stopListenTo(this.onDeleteDocEventListener) } */ componentWillUnmount () { const { Order } = this.foundation.data /** * Destroy event listeners of this component which are listening to Order collection * and react to it */ Order.stopListenTo(this.onAddDocEventListener) Order.stopListenTo(this.onEditDocEventListener) Order.stopListenTo(this.onDeleteDocEventListener) this.onAddDocEventListener = null this.onEditDocEventListener = null this.onDeleteDocEventListener = null } /** * @async * @Method Orders.componentDidMount * @summary Called immediately after a component is mounted. Setting state here will trigger re-rendering. * @description Once component is monted we are now ready to start listen to changes on Order data entity and get a list of order in database to fill out the state.orders * @example componentDidMount() { const { Order } = this.foundation.data this.onAddDocEventListener = Order.on( 'add', handlerOnAddDocEventListener.bind(this) ) this.onEditDocEventListener = Order.on( 'edit', handlerOnEditDocEventListener.bind(this) ) this.onDeleteDocEventListener = Order.on( 'delete', handlerOnDeleteDocEventListener.bind(this) ) const { error, data } = await Order.find({}, { ...this.pagination }) if (!error) { this.setState({ orders: orders.data }) } } */ async componentDidMount () { const { Order } = this.foundation.data // listen to add, edit and delete events on Order collection // and react to it /** * listen to add Order Data Entity change event on Data API */ this.onAddDocEventListener = Order.on('add', handlerOnAddDocEventListener.bind(this)) /** * listen to edit Order Data Entity change event on Data API */ this.onEditDocEventListener = Order.on('edit', handlerOnEditDocEventListener.bind(this)) /** * listen to delete Order Data Entity change event on Data API */ this.onDeleteDocEventListener = Order.on('delete', handlerOnDeleteDocEventListener.bind(this)) // get Orders on database const orders = await Order.find({}, { ...this.pagination }) console.warn(orders) if (orders.data) { this.setState({ orders: orders.data }) } } /** * @Method Orders.handleDeleteOrder * @summary Event handler that Deletes a order * @description Once component is monted we are now ready to start listen to changes on Order data entity and get a list of order in database to fill out the state.orders * @param {event} event - The HTML event triggered on User interation * @param {number} __id - The primaryKey value of the record willing to be deleted * @example handleDeleteOrder(e, ___id) { const { Order } = this.foundation.data e.preventDefault() swal({ title: 'Are you sure?', text: 'Once deleted, you will not be able to recover this!', icon: 'warning', buttons: true, dangerMode: true }).then(async (willDelete) =&gt; { if (willDelete) { const r = await Order.delete(___id) if (r.error) { swal('Database error', e.error.message, 'error') return } swal('Poof! The order has been deleted!', { icon: 'success' }) return &lt;Redirect to = '/dashboard' / &gt; } else { swal('The Order is safe!') } }) } // &lt;a color='primary' href='#' onClick={e =&gt; this.handleDeleteOrder(e, doc.__id)}&gt;[delete]&lt;/a&gt; */ handleDeleteOrder (e, ___id) { const { Order } = this.foundation.data e.preventDefault() // console.error(___id) swal({ title: 'Are you sure?', text: 'Once deleted, you will not be able to recover this!', icon: 'warning', buttons: true, dangerMode: true }).then(async (willDelete) =&gt; { if (willDelete) { const r = await Order.delete(___id) // console.error(r) if (r.error) { swal('Database error', e.error.message, 'error') return } swal('Poof! The order has been deleted!', { icon: 'success' }) return &lt;Redirect to='/dashboard' /&gt; } else { swal('The Order is safe!') } }) } /** * @async * @Method Orders.render * @summary Component render function. * @description Renders a grid of Orders */ render () { return ( &lt;main className='col-md-9 ms-sm-auto col-lg-10 px-md-4 main'&gt; &lt;div className='d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom'&gt; &lt;h1 className='h2'&gt;Orders&lt;/h1&gt; &lt;div className='btn-toolbar mb-2 mb-md-0'&gt; &lt;div className='btn-group me-2'&gt; &lt;LinkContainer to='/OrdersAdd'&gt; &lt;button type='button' className='btn btn-sm btn-outline-secondary'&gt; Add new Order &lt;/button&gt; &lt;/LinkContainer&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;div className='table-responsive'&gt; &lt;table className='table table-striped table-sm'&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;Date&lt;/th&gt; &lt;th&gt;Name&lt;/th&gt; &lt;th&gt;Ship to&lt;/th&gt; &lt;th&gt;Payment method&lt;/th&gt; &lt;th align='right'&gt;Amount&lt;/th&gt; &lt;th&gt;-&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; {this.state.orders.map((doc) =&gt; ( &lt;tr key={doc.id}&gt; &lt;td&gt;{moment(doc.date).subtract(6, 'days').calendar()}&lt;/td&gt; &lt;td&gt;{doc.name}&lt;/td&gt; &lt;td&gt;{doc.shipTo}&lt;/td&gt; &lt;td&gt;{doc.paymentMethod}&lt;/td&gt; &lt;td align='right'&gt;USD {formatter.format(doc.amount)}&lt;/td&gt; &lt;td&gt; &lt;a color='primary' href='#' onClick={e =&gt; this.handleDeleteOrder(e, doc.__id)}&gt;[delete]&lt;/a&gt; &lt;/td&gt; &lt;/tr&gt; ))} &lt;/tbody&gt; &lt;/table&gt; &lt;/div&gt; &lt;/main&gt; ) } } export default Orders × Search results Close Sponsored by WEB2 Solutions "},"components_orders_OrdersAdd.js.html":{"id":"components_orders_OrdersAdd.js.html","title":"Source: components/orders/OrdersAdd.js","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Source: components/orders/OrdersAdd.js /* globals document */ import React from 'react' import { Redirect } from 'react-router-dom' // import { LinkContainer } from 'react-router-bootstrap' // import swal from 'sweetalert' // import moment from 'moment' import swal from 'sweetalert' /* const formatter = new Intl.NumberFormat('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) */ const orderObj = { name: '', shipTo: '', paymentMethod: '', amount: '', customerId: '' } /** * @author Eduardo Perotta de Almeida &lt;web2solucoes@gmail.com&gt; * @Component OrdersAdd * @description React component that creates new a Order into the database * @extends React.Component */ class OrdersAdd extends React.Component { constructor (props) { super(props) /** * Entity name which this component represents to */ this.entity = 'Order' /** * access to foundation instance */ this.foundation = props.foundation /** * default pagination to list data */ this.pagination = { offset: 0, limit: 30 } /** * component state */ this.state = { order: { ...orderObj }, customers: [], toDashboard: false } this.form = null this.handleFormSubmit = this.handleFormSubmit.bind(this) this.handleChangeFieldValue = this.handleChangeFieldValue.bind(this) } /** * @Method OrdersAdd.componentDidMount * @summary Called immediately after a component is mounted. Setting state here will trigger re-rendering. * @description Once component is monted we are now ready to get customer list to use on select html item. * We could also listen to changes in Customer and change the select values based on those events * @example async componentDidMount() { const { Customer } = this.foundation.data if (!this.state.toDashboard) { this.form = document.querySelectorAll('.needs-validation')[0] this.form.addEventListener('submit', this.handleFormSubmit, false) } const findCustomers = await Customer.find({}) if (!findCustomers) { return } if (findCustomers.data) { this.setState({ customers: findCustomers.data }) } } */ async componentDidMount () { const { Customer } = this.foundation.data if (!this.state.toDashboard) { this.form = document.querySelectorAll('.needs-validation')[0] this.form.addEventListener('submit', this.handleFormSubmit, false) } const findCustomers = await Customer.find({}) if (!findCustomers) { return } if (findCustomers.data) { this.setState({ customers: findCustomers.data }) } } /** * @Method OrdersAdd.handleChangeFieldValue * @summary Event handler that change form field values and set it state * @param {event} event - The HTML event triggered on User interation * @example handleChangeFieldValue(e) { const { Customer } = this.foundation.data if (e.target) { if (e.target.value === null || e.target.value === 'null') { const copy = { ...orderObj } delete copy.amount // console.debug(copy) this.setState({ order: copy }) return } } const newHash = { ...this.state.order } if (e.target.id === 'amount') { newHash[e.target.id] = e.target.value } else if (e.target.id === 'name') { const { data, error } = await Customer.findById(e.target.value) if (error) { return } // console.error({ data, error }) newHash.customerId = data.__id newHash.name = data.name newHash.shipTo = data.address newHash.paymentMethod = data.cards[0] } // console.error(newHash) this.setState({ order: newHash }) } */ async handleChangeFieldValue (e) { const { Customer } = this.foundation.data if (e.target) { if (e.target.value === null || e.target.value === 'null') { const copy = { ...orderObj } delete copy.amount // console.debug(copy) this.setState({ order: copy }) return } } const newHash = { ...this.state.order } if (e.target.id === 'amount') { newHash[e.target.id] = e.target.value } else if (e.target.id === 'name') { const { data, error } = await Customer.findById(e.target.value) if (error) { return } // console.error({ data, error }) newHash.customerId = data.__id newHash.name = data.name newHash.shipTo = data.address newHash.paymentMethod = data.cards[0] } // console.error(newHash) this.setState({ order: newHash }) } /** * @async * @Method OrdersAdd.handleFormSubmit * @summary Event handler that handles the form submission * @param {event} event - The HTML event triggered on User interation * @example async handleFormSubmit(e) { const { Order } = this.foundation.data if (!this.form.checkValidity()) { // console.log('not validated') } e.preventDefault() e.stopPropagation() this.form.classList.add('was-validated') const doc = { ...this.state.order } const { data, error } = await Order.add(doc) if (error) { swal('Database error', error.message, 'error') return } this.setState({ toDashboard: true }) } */ async handleFormSubmit (e) { e.preventDefault() e.stopPropagation() const { Order } = this.foundation.data if (!this.form.checkValidity()) { // console.log('not validated') } this.form.classList.add('was-validated') const doc = { ...this.state.order } const { /* data, */ error } = await Order.add(doc) if (error) { swal('Database error', error.message, 'error') return } this.setState({ toDashboard: true }) } /** * @async * @Method OrdersAdd.render * @summary Component render function. * @description Renders a form to create the Order data */ render () { if (this.state.toDashboard === true) { return &lt;Redirect to='/Orders' /&gt; } return ( &lt;main className='col-md-9 ms-sm-auto col-lg-10 px-md-4 main'&gt; &lt;div className='d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom'&gt; &lt;h1 className='h2'&gt;Order Add&lt;/h1&gt; &lt;/div&gt; &lt;div className='table-responsive'&gt; &lt;form className='needs-validation' noValidate&gt; &lt;div className='row g-3'&gt; &lt;div className='col-md-5'&gt; &lt;label htmlFor='name' className='form-label'&gt;Customer&lt;/label&gt; &lt;select className='custom-select' id='name' required value={this.state.order.customerId} onChange={this.handleChangeFieldValue} &gt; &lt;option value=''&gt;Choose...&lt;/option&gt; {this.state.customers.map((customer) =&gt; ( &lt;option key={customer.__id} value={customer.__id} &gt; {customer.name} &lt;/option&gt; ))} &lt;/select&gt; &lt;div className='invalid-feedback'&gt; Please select a Customer. &lt;/div&gt; &lt;/div&gt; &lt;div className='col-12'&gt; &lt;label htmlFor='amount' className='form-label'&gt;Amount&lt;/label&gt; &lt;input type='text' className='form-control' id='amount' placeholder='' value={this.state.order.amount} required onChange={this.handleChangeFieldValue} /&gt; &lt;div className='invalid-feedback'&gt; Valid amount &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;hr className='my-4' /&gt; &lt;button className='w-100 btn btn-primary btn-lg' type='submit'&gt;save&lt;/button&gt; &lt;/form&gt; &lt;/div&gt; &lt;/main&gt; ) } } export default OrdersAdd × Search results Close Sponsored by WEB2 Solutions "},"components_products_index.js.html":{"id":"components_products_index.js.html","title":"Source: components/products/index.js","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Source: components/products/index.js /* globals */ import React from 'react' import { Link, Redirect } from 'react-router-dom' import { LinkContainer } from 'react-router-bootstrap' import swal from 'sweetalert' /* import moment from 'moment' const formatter = new Intl.NumberFormat('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) */ const handlerOnAddDocEventListener = function (eventObj) { const { error, /* document, foundation, */ data } = eventObj if (error) { console.error(`Error adding user: ${error}`) return } console.debug([data, ...this.state.products]) this.setState({ products: [data, ...this.state.products] }) } const handlerOnEditDocEventListener = function (eventObj) { const { data, primaryKey, /* document, foundation, */ error } = eventObj if (error) { console.error(`Error updating user: ${error}`) return } const newData = this.state.products.map((product) =&gt; { if (product.__id === primaryKey) { return data } else { return product } }) console.debug([...newData]) this.setState({ products: [...newData] }) } const handlerOnDeleteDocEventListener = function (eventObj) { const { error, /* document, foundation, */ data } = eventObj if (error) { console.error(`Error deleting user: ${error}`) return } const allProducts = [...this.state.products] for (let x = 0; x &lt; allProducts.length; x++) { const product = allProducts[x] if (product.__id === data.__id) { allProducts.splice(x) } } this.setState({ products: allProducts }) } /** * @author Eduardo Perotta de Almeida &lt;web2solucoes@gmail.com&gt; * @Component Products * @description React component consuming a Product Data Entity collection to feed a grid * @extends React.Component */ class Products extends React.Component { constructor (props) { super(props) // console.error('------&gt;', props) /** * Entity name which this component represents to */ this.entity = 'Product' /** * access to foundation instance */ this.foundation = props.foundation /** * default pagination to list data */ this.pagination = { offset: 0, limit: 30 } /** * component state */ this.state = { products: [] } this.onAddDocEventListener = null this.onEditDocEventListener = null this.onDeleteDocEventListener = null this.handleDeleteProduct = this.handleDeleteProduct.bind(this) } /** * @Method Products.componentWillUnmount * @summary Called immediately before a component is destroyed. Perform any necessary cleanup in this method, such as cancelled network requests, or cleaning up any DOM elements created in componentDidMount. * @description lets stop listen to Product Data State Change Events * @example componentWillUnmount() { const { Product } = this.foundation.data Product.stopListenTo(this.onAddDocEventListener) Product.stopListenTo(this.onEditDocEventListener) Product.stopListenTo(this.onDeleteDocEventListener) } */ componentWillUnmount () { const { Product } = this.foundation.data /** * Destroy event listeners of this component which are listening to Product collection * and react to it */ Product.stopListenTo(this.onAddDocEventListener) Product.stopListenTo(this.onEditDocEventListener) Product.stopListenTo(this.onDeleteDocEventListener) this.onAddDocEventListener = null this.onEditDocEventListener = null this.onDeleteDocEventListener = null } /** * @async * @Method Products.componentDidMount * @summary Called immediately after a component is mounted. Setting state here will trigger re-rendering. * @description Once component is monted we are now ready to start listen to changes on Product data entity and get a list of product in database to fill out the state.products * @example componentDidMount() { const { Product } = this.foundation.data this.onAddDocEventListener = Product.on( 'add', handlerOnAddDocEventListener.bind(this) ) this.onEditDocEventListener = Product.on( 'edit', handlerOnEditDocEventListener.bind(this) ) this.onDeleteDocEventListener = Product.on( 'delete', handlerOnDeleteDocEventListener.bind(this) ) const { error, data } = await Product.find({}, { ...this.pagination }) if (!error) { this.setState({ products: products.data }) } } */ async componentDidMount () { const { Product } = this.foundation.data // listen to add, edit and delete events on Product collection // and react to it /** * listen to add Product Data Entity change event on Data API */ this.onAddDocEventListener = Product.on('add', handlerOnAddDocEventListener.bind(this)) /** * listen to edit Product Data Entity change event on Data API */ this.onEditDocEventListener = Product.on('edit', handlerOnEditDocEventListener.bind(this)) /** * listen to delete Product Data Entity change event on Data API */ this.onDeleteDocEventListener = Product.on('delete', handlerOnDeleteDocEventListener.bind(this)) // get Products on database const products = await Product.find({}, { ...this.pagination }) // console.warn(products) if (products.data) { this.setState({ products: products.data }) } } /** * @Method Products.handleDeleteProduct * @summary Event handler that Deletes a product * @description Once component is monted we are now ready to start listen to changes on Product data entity and get a list of product in database to fill out the state.products * @param {event} event - The HTML event triggered on User interation * @param {number} __id - The primaryKey value of the record willing to be deleted * @example handleDeleteProduct(e, ___id) { const { Product } = this.foundation.data e.preventDefault() swal({ title: 'Are you sure?', text: 'Once deleted, you will not be able to recover this!', icon: 'warning', buttons: true, dangerMode: true }).then(async (willDelete) =&gt; { if (willDelete) { const r = await Product.delete(___id) if (r.error) { swal('Database error', e.error.message, 'error') return } swal('Poof! The product has been deleted!', { icon: 'success' }) return &lt;Redirect to = '/dashboard' / &gt; } else { swal('The Product is safe!') } }) } // &lt;a color='primary' href='#' onClick={e =&gt; this.handleDeleteProduct(e, doc.__id)}&gt;[delete]&lt;/a&gt; */ handleDeleteProduct (e, ___id) { const { Product } = this.foundation.data e.preventDefault() // console.error(___id) swal({ title: 'Are you sure?', text: 'Once deleted, you will not be able to recover this!', icon: 'warning', buttons: true, dangerMode: true }).then(async (willDelete) =&gt; { if (willDelete) { const r = await Product.delete(___id) // console.error(r) if (r.error) { swal('Database error', e.error.message, 'error') return } swal('Poof! The product has been deleted!', { icon: 'success' }) return &lt;Redirect to='/dashboard' /&gt; } else { swal('The Product is safe!') } }) } /** * @async * @Method Products.render * @summary Component render function. * @description Renders a grid of Products */ render () { return ( &lt;main className='col-md-9 ms-sm-auto col-lg-10 px-md-4 main'&gt; &lt;div className='d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 bproduct-bottom'&gt; &lt;h1 className='h2'&gt;Products&lt;/h1&gt; &lt;div className='btn-toolbar mb-2 mb-md-0'&gt; &lt;div className='btn-group me-2'&gt; &lt;LinkContainer to='/ProductsAdd'&gt; &lt;button type='button' className='btn btn-sm btn-outline-secondary'&gt; Add new Product &lt;/button&gt; &lt;/LinkContainer&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;div className='table-responsive'&gt; &lt;table className='table table-striped table-sm'&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;Name&lt;/th&gt; &lt;th&gt;Address&lt;/th&gt; &lt;th&gt;E-mail&lt;/th&gt; &lt;th align='right'&gt;Cards&lt;/th&gt; &lt;th&gt;-&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; {this.state.products.map((doc) =&gt; ( &lt;tr key={doc.id}&gt; &lt;td&gt;{doc.name}&lt;/td&gt; &lt;td&gt;{doc.address}&lt;/td&gt; &lt;td&gt;{doc.email}&lt;/td&gt; &lt;td align='right'&gt;{doc.cards}&lt;/td&gt; &lt;td&gt; &lt;Link color='primary' to={`/ProductsEdit/${doc.__id}`}&gt;[edit]&lt;/Link&gt; | &lt;a color='primary' href='#' onClick={e =&gt; this.handleDeleteProduct(e, doc.__id)}&gt;[delete]&lt;/a&gt; &lt;/td&gt; &lt;/tr&gt; ))} &lt;/tbody&gt; &lt;/table&gt; &lt;/div&gt; &lt;/main&gt; ) } } export default Products × Search results Close Sponsored by WEB2 Solutions "},"components_products_CustomersAdd.js.html":{"id":"components_products_CustomersAdd.js.html","title":"Source: components/products/CustomersAdd.js","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Source: components/products/CustomersAdd.js /* globals document */ import React from 'react' import { Redirect } from 'react-router-dom' // import { LinkContainer } from 'react-router-bootstrap' // import swal from 'sweetalert' // import moment from 'moment' import swal from 'sweetalert' /* const formatter = new Intl.NumberFormat('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) */ const productObj = { name: '', address: 'Seminole, FL', email: '', cards: [] } /** * @author Eduardo Perotta de Almeida &lt;web2solucoes@gmail.com&gt; * @Component ProductsAdd * @description React component that creates new a Product into the database * @extends React.Component */ class ProductsAdd extends React.Component { constructor (props) { super(props) /** * Entity name which this component represents to */ this.entity = 'Product' /** * access to foundation instance */ this.foundation = props.foundation /** * default pagination to list data */ this.pagination = { offset: 0, limit: 30 } /** * component state */ this.state = { product: { ...productObj }, cards: ['VISA ⠀*** 3719'], toDashboard: false } this.form = null this.handleFormSubmit = this.handleFormSubmit.bind(this) this.handleChangeFieldValue = this.handleChangeFieldValue.bind(this) } async componentDidMount () { if (!this.state.toDashboard) { this.form = document.querySelectorAll('.needs-validation')[0] this.form.addEventListener('submit', this.handleFormSubmit, false) } } /** * @Method ProductsAdd.handleChangeFieldValue * @summary Event handler that change form field values and set it state * @param {event} event - The HTML event triggered on User interation * @example handleChangeFieldValue(e) { const newHash = { ...this.state.product } const name = e.target.id || e.target.name const value = e.target.value newHash[name] = value if (name === 'cards') { if (value !== '') { newHash[name] = [value] } else { newHash[name] = [] } } this.setState({ product: newHash }) } */ handleChangeFieldValue (e) { // e.preventDefault() const newHash = { ...this.state.product } const name = e.target.id || e.target.name const value = e.target.value newHash[name] = value if (name === 'cards') { if (value !== '') { newHash[name] = [value] } else { newHash[name] = [] } } // console.error('newHash', newHash) this.setState({ product: newHash }) } /** * @async * @Method ProductsAdd.handleFormSubmit * @summary Event handler that handles the form submission * @param {event} event - The HTML event triggered on User interation * @example async handleFormSubmit(e) { const { Product } = this.foundation.data if (!this.form.checkValidity()) { // console.log('not validated') } e.preventDefault() e.stopPropagation() this.form.classList.add('was-validated') const doc = { ...this.state.product } const { data, error } = await Product.add(doc) if (error) { swal('Database error', error.message, 'error') return } this.setState({ toDashboard: true }) } */ async handleFormSubmit (e) { e.preventDefault() e.stopPropagation() const { Product } = this.foundation.data if (!this.form.checkValidity()) { // console.log('not validated') } this.form.classList.add('was-validated') const doc = { ...this.state.product } const { /* data, */ error } = await Product.add(doc) if (error) { swal('Database error', error.message, 'error') return } this.setState({ toDashboard: true }) } /** * @async * @Method ProductsAdd.render * @summary Component render function. * @description Renders a form to create the Product data */ render () { if (this.state.toDashboard === true) { return &lt;Redirect to='/Products' /&gt; } return ( &lt;main className='col-md-9 ms-sm-auto col-lg-10 px-md-4 main'&gt; &lt;div className='d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 bproduct-bottom'&gt; &lt;h1 className='h2'&gt;Product Add&lt;/h1&gt; &lt;/div&gt; &lt;div className='table-responsive'&gt; &lt;form className='needs-validation' noValidate&gt; &lt;div className='row g-3'&gt; &lt;div className='col-12'&gt; &lt;label htmlFor='name' className='form-label'&gt;Name&lt;/label&gt; &lt;input type='text' className='form-control' id='name' placeholder='' value={this.state.product.name} required onChange={this.handleChangeFieldValue} /&gt; &lt;div className='invalid-feedback'&gt; Valid name is required. &lt;/div&gt; &lt;/div&gt; &lt;div className='col-12'&gt; &lt;label htmlFor='email' className='form-label'&gt;Email &lt;/label&gt; &lt;input type='email' className='form-control' id='email' placeholder='you@example.com' required value={this.state.product.email} onChange={this.handleChangeFieldValue} /&gt; &lt;div className='invalid-feedback'&gt; Please enter a valid email address for shipping updates. &lt;/div&gt; &lt;/div&gt; &lt;div className='col-12'&gt; &lt;label htmlFor='address' className='form-label'&gt;Address&lt;/label&gt; &lt;input type='text' className='form-control' id='address' placeholder='1234 Main St' required value={this.state.product.address} onChange={this.handleChangeFieldValue} /&gt; &lt;div className='invalid-feedback'&gt; Please enter your address. &lt;/div&gt; &lt;/div&gt; &lt;div className='col-md-5'&gt; &lt;label htmlFor='cards' className='form-label'&gt;Credit cards&lt;/label&gt; &lt;select className='custom-select' id='cards' required onChange={this.handleChangeFieldValue} &gt; &lt;option value=''&gt;Choose...&lt;/option&gt; {this.state.cards.map((card) =&gt; ( &lt;option key={card} value={card} &gt; {card} &lt;/option&gt; ))} &lt;/select&gt; &lt;div className='invalid-feedback'&gt; Please select a valid credit card. &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;hr className='my-4' /&gt; &lt;button className='w-100 btn btn-primary btn-lg' type='submit'&gt;save&lt;/button&gt; &lt;/form&gt; &lt;/div&gt; &lt;/main&gt; ) } } export default ProductsAdd × Search results Close Sponsored by WEB2 Solutions "},"components_products_CustomersEdit.js.html":{"id":"components_products_CustomersEdit.js.html","title":"Source: components/products/CustomersEdit.js","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Source: components/products/CustomersEdit.js /* globals document */ import React from 'react' import { Redirect, useParams } from 'react-router-dom' // import { LinkContainer } from 'react-router-bootstrap' // import swal from 'sweetalert' // import moment from 'moment' import swal from 'sweetalert' /* const formatter = new Intl.NumberFormat('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) */ const productObj = { __id: null, _id: null, name: '', address: 'Seminole, FL', email: '', cards: [] } /** * @author Eduardo Perotta de Almeida &lt;web2solucoes@gmail.com&gt; * @Component ProductsEdit * @description React component that edits a Product data by biding it to a form * @extends React.Component */ class ProductsEdit extends React.Component { #__id constructor (props) { super(props) /** * Entity name which this component represents to */ this.entity = 'Product' /** * access to foundation instance */ this.foundation = props.foundation /** * default pagination to list data */ this.pagination = { offset: 0, limit: 30 } /** * component state */ this.state = { product: { ...productObj }, cards: ['VISA ⠀*** 3719'], toDashboard: false } this.#__id = null this.form = null this.handleFormSubmit = this.handleFormSubmit.bind(this) this.handleChangeFieldValue = this.handleChangeFieldValue.bind(this) } /** * @async * @Method ProductsEdit.componentDidMount * @summary Called immediately after a component is mounted. Setting state here will trigger re-rendering. * @description Once component is monted we are now ready to get the desired Product data in database and bind to state.product * @example async componentDidMount() { if (!this.state.toDashboard) { this.form = document.querySelectorAll('.needs-validation')[0] this.form.addEventListener('submit', this.handleFormSubmit, false) } const { match: { params } } = this.props const { Product } = this.foundation.data const { __id } = params this.#__id = __id const findProduct = await Product.findById(this.#__id) if (findProduct.error) { console.error('findProduct.error', findProduct.error) return } if (findProduct.data) { this.setState({ product: findProduct.data }) } } */ async componentDidMount() { if (!this.state.toDashboard) { this.form = document.querySelectorAll('.needs-validation')[0] this.form.addEventListener('submit', this.handleFormSubmit, false) } const { match: { params } } = this.props const { Product } = this.foundation.data const { __id } = params this.#__id = __id const findProduct = await Product.findById(this.#__id) if (findProduct.error) { console.error('findProduct.error', findProduct.error) return } if (findProduct.data) { this.setState({ product: findProduct.data }) } } /** * @Method ProductsEdit.handleChangeFieldValue * @summary Event handler that change form field values and set it state * @param {event} event - The HTML event triggered on User interation * @example handleChangeFieldValue(e) { const newHash = { ...this.state.product } const name = e.target.id || e.target.name const value = e.target.value newHash[name] = value if (name === 'cards') { if (value !== '') { newHash[name] = [value] } else { newHash[name] = [] } } this.setState({ product: newHash }) } */ handleChangeFieldValue (e) { const newHash = { ...this.state.product } const name = e.target.id || e.target.name const value = e.target.value newHash[name] = value if (name === 'cards') { if (value !== '') { newHash[name] = [value] } else { newHash[name] = [] } } this.setState({ product: newHash }) } /** * @async * @Method ProductsEdit.handleFormSubmit * @summary Event handler that handles the form submission * @param {event} event - The HTML event triggered on User interation * @example async handleFormSubmit(e) { const { Product } = this.foundation.data if (!this.form.checkValidity()) { // console.log('not validated') } e.preventDefault() e.stopPropagation() this.form.classList.add('was-validated') const doc = { ...this.state.product } const { data, error } = await Product.edit(this.#__id, doc) if (error) { swal('Database error', error.message, 'error') return } this.setState({ toDashboard: true }) } */ async handleFormSubmit(e) { e.preventDefault() e.stopPropagation() const { Product } = this.foundation.data if (!this.form.checkValidity()) { // console.log('not validated') } this.form.classList.add('was-validated') const doc = { ...this.state.product } const { data, error } = await Product.edit(this.#__id, doc) if (error) { swal('Database error', error.message, 'error') return } this.setState({ toDashboard: true }) } /** * @async * @Method ProductsEdit.render * @summary Component render function. * @description Renders a form to edit the Product data */ render () { if (this.state.toDashboard === true) { return &lt;Redirect to='/Products' /&gt; } return ( &lt;main className='col-md-9 ms-sm-auto col-lg-10 px-md-4 main'&gt; &lt;div className='d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 bproduct-bottom'&gt; &lt;h1 className='h2'&gt;Product Edit - {this.state.product.name}&lt;/h1&gt; &lt;/div&gt; &lt;div className='table-responsive'&gt; &lt;form className='needs-validation' noValidate&gt; &lt;div className='row g-3'&gt; &lt;div className='col-12'&gt; &lt;label htmlFor='name' className='form-label'&gt;Name&lt;/label&gt; &lt;input type='text' className='form-control' id='name' placeholder='' value={this.state.product.name} required onChange={this.handleChangeFieldValue} /&gt; &lt;div className='invalid-feedback'&gt; Valid name is required. &lt;/div&gt; &lt;/div&gt; &lt;div className='col-12'&gt; &lt;label htmlFor='email' className='form-label'&gt;Email &lt;/label&gt; &lt;input type='email' className='form-control' id='email' placeholder='you@example.com' required value={this.state.product.email} onChange={this.handleChangeFieldValue} /&gt; &lt;div className='invalid-feedback'&gt; Please enter a valid email address for shipping updates. &lt;/div&gt; &lt;/div&gt; &lt;div className='col-12'&gt; &lt;label htmlFor='address' className='form-label'&gt;Address&lt;/label&gt; &lt;input type='text' className='form-control' id='address' placeholder='1234 Main St' required value={this.state.product.address} onChange={this.handleChangeFieldValue} /&gt; &lt;div className='invalid-feedback'&gt; Please enter your address. &lt;/div&gt; &lt;/div&gt; &lt;div className='col-md-5'&gt; &lt;label htmlFor='cards' className='form-label'&gt;Credit cards&lt;/label&gt; &lt;select className='custom-select' id='cards' required multiple onChange={this.handleChangeFieldValue} value={this.state.product.cards} &gt; &lt;option value=''&gt;Choose...&lt;/option&gt; {this.state.cards.map((card) =&gt; ( &lt;option key={card} value={card} &gt; {card} &lt;/option&gt; ))} &lt;/select&gt; &lt;div className='invalid-feedback'&gt; Please select a valid credit card. &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;hr className='my-4' /&gt; &lt;button className='w-100 btn btn-primary btn-lg' type='submit'&gt;save&lt;/button&gt; &lt;/form&gt; &lt;/div&gt; &lt;/main&gt; ) } } export default ProductsEdit × Search results Close Sponsored by WEB2 Solutions "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Modules Classes Chart React component consuming a Order Data Entity collection to feed a grid. Customers React component consuming a Customer Data Entity collection to feed a grid. CustomersAdd React component that creates new a Customer into the database. CustomersEdit React component that edits a Customer data by biding it to a form. DataEntity Data Entity API Foundation Foundation boostrap class. LocalDatabaseTransport Database transport for IndexedDB. Orders React component consuming a Order Data Entity collection to feed a grid. OrdersAdd React component that creates new a Order into the database. Products React component consuming a Product Data Entity collection to feed a grid. ProductsAdd React component that creates new a Product into the database. ProductsEdit React component that edits a Product data by biding it to a form. × Search results Close Sponsored by WEB2 Solutions "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Classes Classes Chart React component consuming a Order Data Entity collection to feed a grid. Customers React component consuming a Customer Data Entity collection to feed a grid. CustomersAdd React component that creates new a Customer into the database. CustomersEdit React component that edits a Customer data by biding it to a form. DataEntity Data Entity API Foundation Foundation boostrap class. LocalDatabaseTransport Database transport for IndexedDB. Orders React component consuming a Order Data Entity collection to feed a grid. OrdersAdd React component that creates new a Order into the database. Products React component consuming a Product Data Entity collection to feed a grid. ProductsAdd React component that creates new a Product into the database. ProductsEdit React component that edits a Product data by biding it to a form. × Search results Close Sponsored by WEB2 Solutions "},"index.html":{"id":"index.html","title":"Index","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit React Demo App - Class based components This is a React application demo leveraging the Agnostic Web Foundation. This demo is totaly built using React.Component class. This demo is built using Bootstrap 4. Project Structure ├── dist -&gt; Final app code goes here ├── docs │ ├── code -&gt; JSDoc documentation will be saved here │ └── reports -&gt; Karma reports will be saved here ├── html_app -&gt; Original static files ├── test -&gt; Test suites goes here ├── src │ ├── components │ │ ├── customers │ │ │ ├── CustomersAdd.js -&gt; Add form │ │ │ ├── CustomersEdit.js -&gt; Edit form │ │ │ ├── index.js -&gt; Main listing page │ │ │ └── events -&gt; Event Handlers decoupled from component files │ │ ├── dashboard │ │ │ ├── Chart.js -&gt; Finance Chart │ │ │ ├── index.js -&gt; Main listing page │ │ │ └── events -&gt; Event Handlers decoupled from component files │ │ ├── orders │ │ │ ├── OrdersAdd.js -&gt; Add form │ │ │ ├── index.js -&gt; Main listing page │ │ │ └── events -&gt; Event Handlers decoupled from component files │ │ ├── products │ │ │ ├── ProductsAdd.js -&gt; Add form │ │ │ ├── ProductsEdit.js -&gt; Edit form │ │ │ ├── index.js -&gt; Main listing page │ │ │ └── events -&gt; Event Handlers decoupled from component files │ ├── events -&gt; Decoupled Application Event handlers │ ├── schemas -&gt; Data Entity Schemas (or Data Models) are saved here │ ├── App.css │ ├── App.js -&gt; React Application code │ └── main.js -&gt; Application entry point ├── test ├── .babelrc -&gt; Babel configuration ├── .editorconfig -&gt; Some code standards on IDE ├── .eslintignore -&gt; eslint ignore rules ├── .eslintrc.json -&gt; eslint configuration ├── .prettierrc -&gt; prettier configuration ├── jsDoc.json -&gt; JSDoc configuration ├── package.json ├── server.js -&gt; express serving /dist content └── webpack.config.js -&gt; webpack configuration Links Code documentation Unit tests Report × Search results Close Sponsored by WEB2 Solutions "},"Chart.html":{"id":"Chart.html","title":"Class: Chart","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Class: Chart Chart new Chart() React component consuming a Order Data Entity collection to feed a grid. React component consuming a Order Data Entity collection to feed a grid Author: Eduardo Perotta de Almeida Source: components/dashboard/Chart.js, line 24 Extends React.Component Members onAddDocEventListener listen to add Order Data Entity change event on Data API. listen to add Order Data Entity change event on Data API Source: components/dashboard/Chart.js, line 128 onDeleteDocEventListener listen to delete Order Data Entity change event on Data API. listen to delete Order Data Entity change event on Data API Source: components/dashboard/Chart.js, line 138 onEditDocEventListener listen to edit Order Data Entity change event on Data API. listen to edit Order Data Entity change event on Data API Source: components/dashboard/Chart.js, line 133 Methods &lt;async, static&gt; componentDidMount() Called immediately after a component is mounted. Setting state here will trigger re-rendering. Once component is monted we are now ready to start listen to changes on Order data entity and get a list of order in database to fill out the state.orders Source: components/dashboard/Chart.js, line 102 Example componentDidMount() { const { Order } = this.foundation.data // listen to add, edit and delete events on Order collection // and react to it this.onAddDocEventListener = Order.on('add', this.handlerChangeOrder) this.onEditDocEventListener = Order.on('edit', this.handlerChangeOrder) this.onDeleteDocEventListener = Order.on('delete', this.handlerChangeOrder) await this.setSeries() } &lt;static&gt; componentWillUnmount() Called immediately before a component is destroyed. Perform any necessary cleanup in this method, such as cancelled network requests, or cleaning up any DOM elements created in componentDidMount. lets stop listen to Order Data State Change Events Source: components/dashboard/Chart.js, line 76 Example componentWillUnmount() { const { Order } = this.foundation.data Order.stopListenTo(this.onAddDocEventListener) Order.stopListenTo(this.onEditDocEventListener) Order.stopListenTo(this.onDeleteDocEventListener) } × Search results Close Sponsored by WEB2 Solutions "},"Customers.html":{"id":"Customers.html","title":"Class: Customers","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Class: Customers Customers new Customers() React component consuming a Customer Data Entity collection to feed a grid. React component consuming a Customer Data Entity collection to feed a grid Author: Eduardo Perotta de Almeida Source: components/customers/index.js, line 62 Extends React.Component Members entity Entity name which this component represents to. Entity name which this component represents to Source: components/customers/index.js, line 69 foundation access to foundation instance. access to foundation instance Source: components/customers/index.js, line 73 onAddDocEventListener listen to add Customer Data Entity change event on Data API. listen to add Customer Data Entity change event on Data API Source: components/customers/index.js, line 157 onDeleteDocEventListener listen to delete Customer Data Entity change event on Data API. listen to delete Customer Data Entity change event on Data API Source: components/customers/index.js, line 167 onEditDocEventListener listen to edit Customer Data Entity change event on Data API. listen to edit Customer Data Entity change event on Data API Source: components/customers/index.js, line 162 pagination default pagination to list data. default pagination to list data Source: components/customers/index.js, line 77 state component state. component state Source: components/customers/index.js, line 84 Methods &lt;async, static&gt; componentDidMount() Called immediately after a component is mounted. Setting state here will trigger re-rendering. Once component is monted we are now ready to start listen to changes on Customer data entity and get a list of customer in database to fill out the state.customers Source: components/customers/index.js, line 119 Example componentDidMount() { const { Customer } = this.foundation.data this.onAddDocEventListener = Customer.on( 'add', handlerOnAddDocEventListener.bind(this) ) this.onEditDocEventListener = Customer.on( 'edit', handlerOnEditDocEventListener.bind(this) ) this.onDeleteDocEventListener = Customer.on( 'delete', handlerOnDeleteDocEventListener.bind(this) ) const { error, data } = await Customer.find({}, { ...this.pagination }) if (!error) { this.setState({ customers: customers.data }) } } &lt;static&gt; componentWillUnmount() Called immediately before a component is destroyed. Perform any necessary cleanup in this method, such as cancelled network requests, or cleaning up any DOM elements created in componentDidMount. lets stop listen to Customer Data State Change Events Source: components/customers/index.js, line 93 Example componentWillUnmount() { const { Customer } = this.foundation.data Customer.stopListenTo(this.onAddDocEventListener) Customer.stopListenTo(this.onEditDocEventListener) Customer.stopListenTo(this.onDeleteDocEventListener) } &lt;static&gt; handleDeleteCustomer(event, __id) Event handler that Deletes a customer Once component is monted we are now ready to start listen to changes on Customer data entity and get a list of customer in database to fill out the state.customers Parameters: Name Type Description event event The HTML event triggered on User interation __id number The primaryKey value of the record willing to be deleted Source: components/customers/index.js, line 178 Example handleDeleteCustomer(e, ___id) { const { Customer } = this.foundation.data e.preventDefault() swal({ title: 'Are you sure?', text: 'Once deleted, you will not be able to recover this!', icon: 'warning', buttons: true, dangerMode: true }).then(async (willDelete) =&gt; { if (willDelete) { const r = await Customer.delete(___id) if (r.error) { swal('Database error', e.error.message, 'error') return } swal('Poof! The customer has been deleted!', { icon: 'success' }) return &lt;Redirect to = '/dashboard' / &gt; } else { swal('The Customer is safe!') } }) } // &lt;a color='primary' href='#' onClick={e =&gt; this.handleDeleteCustomer(e, doc.__id)}&gt;[delete]&lt;/a&gt; &lt;async, static&gt; render() Component render function. Renders a grid of Customers Source: components/customers/index.js, line 241 × Search results Close Sponsored by WEB2 Solutions "},"CustomersAdd.html":{"id":"CustomersAdd.html","title":"Class: CustomersAdd","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Class: CustomersAdd CustomersAdd new CustomersAdd() React component that creates new a Customer into the database. React component that creates new a Customer into the database Author: Eduardo Perotta de Almeida Source: components/customers/CustomersAdd.js, line 26 Extends React.Component Members entity Entity name which this component represents to. Entity name which this component represents to Source: components/customers/CustomersAdd.js, line 32 foundation access to foundation instance. access to foundation instance Source: components/customers/CustomersAdd.js, line 36 pagination default pagination to list data. default pagination to list data Source: components/customers/CustomersAdd.js, line 40 state component state. component state Source: components/customers/CustomersAdd.js, line 47 Methods &lt;static&gt; handleChangeFieldValue(event) Event handler that change form field values and set it state Parameters: Name Type Description event event The HTML event triggered on User interation Source: components/customers/CustomersAdd.js, line 66 Example handleChangeFieldValue(e) { const newHash = { ...this.state.customer } const name = e.target.id || e.target.name const value = e.target.value newHash[name] = value if (name === 'cards') { if (value !== '') { newHash[name] = [value] } else { newHash[name] = [] } } this.setState({ customer: newHash }) } &lt;async, static&gt; handleFormSubmit(event) Event handler that handles the form submission Parameters: Name Type Description event event The HTML event triggered on User interation Source: components/customers/CustomersAdd.js, line 103 Example async handleFormSubmit(e) { const { Customer } = this.foundation.data if (!this.form.checkValidity()) { // console.log('not validated') } e.preventDefault() e.stopPropagation() this.form.classList.add('was-validated') const doc = { ...this.state.customer } const { data, error } = await Customer.add(doc) if (error) { swal('Database error', error.message, 'error') return } this.setState({ toDashboard: true }) } &lt;async, static&gt; render() Component render function. Renders a form to create the Customer data Source: components/customers/CustomersAdd.js, line 143 × Search results Close Sponsored by WEB2 Solutions "},"CustomersEdit.html":{"id":"CustomersEdit.html","title":"Class: CustomersEdit","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Class: CustomersEdit CustomersEdit new CustomersEdit() React component that edits a Customer data by biding it to a form. React component that edits a Customer data by biding it to a form Author: Eduardo Perotta de Almeida Source: components/customers/CustomersEdit.js, line 28 Extends React.Component Members entity Entity name which this component represents to. Entity name which this component represents to Source: components/customers/CustomersEdit.js, line 35 foundation access to foundation instance. access to foundation instance Source: components/customers/CustomersEdit.js, line 39 pagination default pagination to list data. default pagination to list data Source: components/customers/CustomersEdit.js, line 43 state component state. component state Source: components/customers/CustomersEdit.js, line 50 Methods &lt;async, static&gt; componentDidMount() Called immediately after a component is mounted. Setting state here will trigger re-rendering. Once component is monted we are now ready to get the desired Customer data in database and bind to state.customer Source: components/customers/CustomersEdit.js, line 62 Example async componentDidMount() { if (!this.state.toDashboard) { this.form = document.querySelectorAll('.needs-validation')[0] this.form.addEventListener('submit', this.handleFormSubmit, false) } const { match: { params } } = this.props const { Customer } = this.foundation.data const { __id } = params this.#__id = __id const findCustomer = await Customer.findById(this.#__id) if (findCustomer.error) { console.error('findCustomer.error', findCustomer.error) return } if (findCustomer.data) { this.setState({ customer: findCustomer.data }) } } &lt;static&gt; handleChangeFieldValue(event) Event handler that change form field values and set it state Parameters: Name Type Description event event The HTML event triggered on User interation Source: components/customers/CustomersEdit.js, line 108 Example handleChangeFieldValue(e) { const newHash = { ...this.state.customer } const name = e.target.id || e.target.name const value = e.target.value newHash[name] = value if (name === 'cards') { if (value !== '') { newHash[name] = [value] } else { newHash[name] = [] } } this.setState({ customer: newHash }) } &lt;async, static&gt; handleFormSubmit(event) Event handler that handles the form submission Parameters: Name Type Description event event The HTML event triggered on User interation Source: components/customers/CustomersEdit.js, line 143 Example async handleFormSubmit(e) { const { Customer } = this.foundation.data if (!this.form.checkValidity()) { // console.log('not validated') } e.preventDefault() e.stopPropagation() this.form.classList.add('was-validated') const doc = { ...this.state.customer } const { data, error } = await Customer.edit(this.#__id, doc) if (error) { swal('Database error', error.message, 'error') return } this.setState({ toDashboard: true }) } &lt;async, static&gt; render() Component render function. Renders a form to edit the Customer data Source: components/customers/CustomersEdit.js, line 183 × Search results Close Sponsored by WEB2 Solutions "},"DataEntity.html":{"id":"DataEntity.html","title":"Class: DataEntity","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Class: DataEntity DataEntity new DataEntity(DataEntityConfig) Data Entity API When composing web applications using this library, we strongly believe the data design and plan should be the entry point of your software design. The Entity Relationship diagram shall to be one of the initial documents you should to design before starting to write your software. We assume the Entity Relationship and Data Entity models as technique and paradigm to design the application data. If you have no idea of how agile you could to design your ER diagram, please take a look at some tools like Moon Modeler Every Data Entity in the system has it own encapsulated properties and methods that cares about where entity data is writen to and read from. The DataEntity relies on the application instance (passed to it constructor) to access the available data transports. It means you can not use DataEntity prior starting a data transport layer. This class is not for direct usage in your project, unless you are a core developer or want to understand what happens behind the scenes, you should consider to take a look at the Foundation class. Parameters: Name Type Description DataEntityConfig object Data Entity configuration Properties Name Type Description foundation string Provide Accesss to Foundation scope entity string Data entity name which this dataEntity instance is handling strategy boolean Data transport strategy schema boolean Data schema for this Data Entity abstraction. Do not declare the params __id and _id inside your schemas. Author: Eduardo Perotta de Almeida Source: foundation/DataEntity.js, line 7 Example import { Schema } from '../foundation/Foundation' const schema = new Schema({ // do not declare __id // do not declare _id name: { type: String, required: true, index: true }, address: { type: String, required: true, index: true }, email: { type: String, required: true, index: true }, cards: { type: [], required: true } }) const Customer = new DataEntity({ foundation, // Foundation instance, object entity: 'Customer', // entity name, string strategy: 'offline', // data strategy, string schema // data schema, a mongoose like schema }) // listen to add Customer Data event on Data API const onAddDocEventListener = Customer.on( 'add', function(eventObj){ const { error, document, foundation, data } = eventObj // do something like to update the component View state Based On Information from Incoming Event component.setState({ propertyName: newValue }) // React: component.$set(component.data, 'propertyName', newValue) // Vue: } ) // listen to edit Customer Data event on Data API const onEditDocEventListener = Customer.on( 'edit', function (eventObj) { const { error, document, foundation, data } = eventObj // do something like to update the component View state Based On Information from Incoming Event component.setState({ propertyName: newValue }) // React: component.$set(component.data, 'propertyName', newValue) // Vue: } ) // listen to delete Customer Data event on Data API const onDeleteDocEventListener = Customer.on( 'delete', function (eventObj) { const { error, document, foundation, data } = eventObj // do something like to update the component View state Based On Information from Incoming Event component.setState({ propertyName: newValue }) // React: component.$set(component.data, 'propertyName', newValue) // Vue: } ) // Stop to listen to events to avoid memory leak or others kind of problems // like to change the state of an unmounted component. // Do something like this -&gt; before component unmount OR before window unload Customer.stopListenTo(onAddDocEventListener) Customer.stopListenTo(onEditDocEventListener) Customer.stopListenTo(onDeleteDocEventListener) Extends EventSystem Members &lt;static&gt; strategy :getter Gets the data strategy currently being used. Gets the data strategy currently being used Type: getter Source: foundation/DataEntity.js, line 148 Example console.log(DataEntity.strategy) Methods &lt;static&gt; _listenToAllOtherSessionsStateChanges() PRIVATE - Listen to data state changes on every Application session. Listen to data state change event incoming from every other Application session and communicates to every subscriber tied to this session. The application scope is the browser running the application. Every tab is considered a session. Internally it triggers all events related to data change events, except if the source, the session which originated the event, is the same that is receiving the event It does not rely on network to propagate the changes. Source: foundation/DataEntity.js, line 517 Example this.#_listenToAllOtherSessionsStateChanges() &lt;static&gt; _sendStateChangeToAllOtherSessions(state) PRIVATE - Sends data state changes information to every other current application session. The application scope is the browser running the application. Every tab is considered a session. It can not rely on network. Parameters: Name Type Description state object Object containing all information about the state Properties Name Type Description data object The modified data, default is null if not provided error object | string The returned error when trying to modify the data, default is null if not provided document object The raw object used as value to get the new data state, default is {} if not provided Source: foundation/DataEntity.js, line 555 Example this.#_sendStateChangeToAllOtherSessions({ action: 'add', data: {...newDocument}, error: null, document: {...originalDocument} }) &lt;static&gt; _triggerAddEvents(eventPayload) PRIVATE - Triggers all events related to 'add document' event. PRIVATE - Triggers all events related to 'add document' event Parameters: Name Type Description eventPayload object Object containing all information about the event Properties Name Type Description data object The new document inserted into database, default is null if not provided error object | string The returned error from database add request if any, default is null if not provided primaryKey number The primaryKey value of the added document, default is zero if not provided rawObj object The raw document object provided on dataEntity.add(doc) mehod call. Default is {} if not provided. Source: foundation/DataEntity.js, line 212 &lt;static&gt; _triggerDeleteEvents(eventPayload) PRIVATE - Triggers all events related to 'delete document' event. PRIVATE - Triggers all events related to 'delete document' event Parameters: Name Type Description eventPayload object Object containing all information about the event Properties Name Type Description data object A object containing the __id property of the deleted document, default is null if not provided error object | string The returned error from database edit request if any, default is null if not provided primaryKey number The primaryKey value of the deleted document, default is zero if not provided Source: foundation/DataEntity.js, line 364 &lt;static&gt; _triggerEditEvents(eventPayload) PRIVATE - Triggers all events related to 'edit document' event. PRIVATE - Triggers all events related to 'edit document' event Parameters: Name Type Description eventPayload object Object containing all information about the event Properties Name Type Description data object The new document updated into database, default is null if not provided error object | string The returned error from database edit request if any, default is null if not provided primaryKey number The primaryKey value of the edited document, default is zero if not provided rawObj object The raw document object provided on dataEntity.edit(primaryKey, doc) mehod call. Default is {} if not provided. Source: foundation/DataEntity.js, line 300 &lt;async, static&gt; add(doc) add a new document to the storage. add a new document to the storage Parameters: Name Type Description doc object A valid document validated against mongoose schema Source: foundation/DataEntity.js, line 171 Returns: signature - Default methods signature format { error, data } Type object signature.error - Execution error Type string | object signature.data - Created document Type object Example const doc = { name: 'Eduardo Almeida', address: 'Av. Beira Mar. Praia do Morro, Guarapari - ES. Brazil.', email: 'web2solucoes@gmail.com', cards: [] } const { data, error } = await Customer.add(doc) &lt;async, static&gt; count(query) count all documents based on the given query. count all documents based on the given query Parameters: Name Type Description query object The query object to count documents Source: foundation/DataEntity.js, line 489 Returns: signature - Default methods signature format { error, data } Type object signature.error - Execution error Type string | object signature.data - Documents counter Type number Example User.count({ $or: [{ age: { $lt: 23, $ne: 20 } }, { lastname: { $in: ['Fox'] } }] }) &lt;async, static&gt; delete(primaryKey) delete a document from the storage. delete a document from the storage Parameters: Name Type Description primaryKey string | number The primary key value of the desired document Source: foundation/DataEntity.js, line 337 Returns: signature - Default methods signature format { error, data } Type object signature.error - Execution error Type string | object signature.data - Deleted document Type object &lt;async, static&gt; edit(primaryKey, doc) Edit a document on the storage. Edit a document on the storage Parameters: Name Type Description primaryKey string | number The primary key value of the desired document doc object A valid document validated against mongoose schema Source: foundation/DataEntity.js, line 243 Returns: signature - Default methods signature format { error, data } Type object signature.error - Execution error Type string | object signature.data - Edited document Type object Example const doc = { __id: 1, _id: '601cb8d8623dc60000ee3c24', name: 'Eduardo Almeida', address: 'Av. Beira Mar. Praia do Morro, Guarapari - ES. Brazil.', email: 'web2solucoes@gmail.com', cards: [] } const { data, error } = await Customer.edit(doc.__id, doc) &lt;async, static&gt; find(query, pagination) find all documents based on the given query. find all documents based on the given query Parameters: Name Type Description query object | null The query object to search documents pagination object Pagination object. If not provided will assume internaly set pagination. Properties Name Type Description offset number Offset. Default 0. limit number Limit. Default 30. Source: foundation/DataEntity.js, line 453 Returns: signature - Default methods signature format { error, data } Type object signature.error - Execution error Type string | object signature.data - Array of Found documents Type array Example User.find({ $or: [{ age: { $lt: 23, $ne: 20 } }, { lastname: { $in: ['Fox'] } }] }) &lt;async, static&gt; findAll() find all documents. find all documents Source: foundation/DataEntity.js, line 429 Returns: signature - Default methods signature format { error, data } Type object signature.error - Execution error Type string | object signature.data - Array of Found documents Type array &lt;async, static&gt; findById(primaryKey) find a document from the storage by ID. find a document from the storage by ID Parameters: Name Type Description primaryKey string | number The primary key value of the desired document Source: foundation/DataEntity.js, line 398 Returns: signature - Default methods signature format { error, data } Type object signature.error - Execution error Type string | object signature.data - Found document Type object &lt;static&gt; Model(doc, schema) create a Data Model based on given document. create a Data Model based on given document Parameters: Name Type Description doc object A valid document validated against mongoose schema schema object Mongoose based schema Source: foundation/DataEntity.js, line 159 Returns: model - Mongoose document Type object × Search results Close Sponsored by WEB2 Solutions "},"Foundation.html":{"id":"Foundation.html","title":"Class: Foundation","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Class: Foundation Foundation new Foundation(config) Foundation boostrap class. Foundation boostrap class Parameters: Name Type Description config object Foundation configuration Properties Name Type Description name string Foundation name dataStrategy string Data strategy. Recognized values: offlineFirst, onlineFirst, offline, online useWorker boolean Use a ServiceWorker in Background schemas object map of data schemas Author: Eduardo Perotta de Almeida Source: foundation/Foundation.js, line 31 Example // =========&gt; main.js // import React import React from 'react' import ReactDOM from 'react-dom' // import Bootstrap import 'bootstrap/dist/css/bootstrap.css' // import React app import App from './App' // import agnostic foundation foundation class import Foundation from './foundation/Foundation' const CustomerSchema = new Foundation.Schema({ name: { type: String, required: true, index: true }, address: { type: String, required: true, index: true }, email: { type: String, required: true, index: true }, cards: { type: [], required: true } }) const OrderSchema = new Foundation.Schema({ name: { type: String, required: true, index: true }, shipTo: { type: String, required: true, index: true }, paymentMethod: { type: String, required: true, index: true }, amount: { type: Number, required: true, default: 0, index: true }, date: { type: Date, default: Date.now, index: true } }) const ProductSchema = new Foundation.Schema({ name: { type: String, required: true, index: true }, vendor: { type: String, required: true, index: true }, price_cost: { type: Number, required: true, default: 0, index: true } }) const UserSchema = new Foundation.Schema({ name: { type: String, required: true }, username: { type: String, required: true } }) const foundation = new Foundation({ name: 'My App', useWorker: true, dataStrategy: 'offlineFirst', schemas: { User: UserSchema, Product: ProductSchema, Order: OrderSchema, Customer: CustomerSchema } }) foundation.on('foundation:start', function(eventObj) { const { foundation, error } = eventObj if (error) { throw new Error(`Error starting foundation stack: ${error}`) } const { User, Product } = foundation.data const Eduardo = await User.add({ name: 'Eduardo Almeida', username: 'web2' }) console.debug('Eduardo', Eduardo) const Volvo = await Product.add({ name: 'Volvo XC90', vendor: 'Volvo', price_cost: 150000 }) console.debug('Volvo', Volvo) }) // start foundation and get it ready to be used await foundation.start() const start = await foundation.start() if (start.error) { throw new Error(`Error starting foundation stack: ${start.error}`) } // console.debug('start', start) ReactDOM.render( &lt;App foundation={foundation} /&gt;, document.getElementById('root') ) Extends EventSystem Members &lt;static&gt; applicationWorker :getter Get the Foundation worker. Get the Foundation worker Type: getter Source: foundation/Foundation.js, line 298 Example Foundation.applicationWorker.postMessage() &lt;static&gt; data :getter Get the Foundation data API(DataEntity). Get the Foundation data API(DataEntity) Type: getter Source: foundation/Foundation.js, line 239 Example const { User, Product } = foundation.data const Eduardo = await User.add({ name: 'Eduardo Almeida', username: 'web2' }) console.debug(Eduardo) // { // data: {__id: 1, _id: \"600e0ae8d9d7f50000e1444b\", name: \"Eduardo Almeida\", username: \"web2\", id: \"600e0ae8d9d7f50000e1444b\"} // error: null // } &lt;static&gt; dataStrategy :getter Get the data strategy being used. Get the data strategy being used. Possible values are: offlineFirst, onlineFirst, offline, online. Default: offlineFirst Type: getter Source: foundation/Foundation.js, line 220 Example console.log(Foundation.dataStrategy) &lt;static&gt; guid :getter Get the Foundation Session guid currently being used. Get the Foundation Session guid currently being used. Type: getter Source: foundation/Foundation.js, line 230 Example console.log(Foundation.guid) &lt;static&gt; name :setter Set the Foundation name. Set the Foundation name Type: setter Source: foundation/Foundation.js, line 278 Example Foundation.name = 'Provide the name here' &lt;static&gt; name :getter Get the Foundation name. Get the Foundation name Type: getter Source: foundation/Foundation.js, line 268 Example console.log(Foundation.name) &lt;static&gt; Schema :getter Creates new data schema. Creates new data schema Type: getter Source: foundation/Foundation.js, line 321 Example new Foundation.Schema({}) &lt;static&gt; started :getter Get the start state. Get the start state Type: getter Source: foundation/Foundation.js, line 289 Example console.log(Foundation.started) &lt;static&gt; tabId :getter Get the Browser tab ID. Get the Browser tab ID Type: getter Source: foundation/Foundation.js, line 258 Example console.log(foundation.tabId) &lt;static&gt; useWorker :getter flag if is there ServiceWorker being used. flag if is there ServiceWorker being used Type: getter Source: foundation/Foundation.js, line 358 Methods &lt;async, static&gt; registerApplicationWorker() Setup and Register the main Service worker used by foundation core. Setup and Register the main Service worker used by foundation core Source: foundation/Foundation.js, line 403 Returns: signature - Default methods signature format { error, data } Type object signature.error - Execution error Type string | object signature.data - Worker Registration Object Type object &lt;async, static&gt; registerWorker(name, workerFile) Setup and Register a Service worker and get it ready for usage into your application scope. Setup and Register a Service worker and get it ready for usage into your application scope Parameters: Name Type Description name string Worker name. Used to access it from the namespace workerFile string Worker file name Source: foundation/Foundation.js, line 439 Returns: signature - Default methods signature format { error, data } Type object signature.error - Execution error Type string | object signature.data - Worker Registration Object Type object &lt;static&gt; getGuidStorage() get Foundation GUID saved on localStorage. get Foundation GUID saved on localStorage Source: foundation/Foundation.js, line 378 Returns: Foundation GUID saved on localStorage Example foundation.getGuidStorage() &lt;static&gt; setGuidStorage(guid) save Foundation GUID to localStorage. save Foundation GUID to localStorage Parameters: Name Type Description guid string Source: foundation/Foundation.js, line 367 Returns: Foundation GUID saved on localStorage &lt;static&gt; setupAppGuid() check if Foundation has a GUID saved o. check if Foundation has a GUID saved o Source: foundation/Foundation.js, line 388 Returns: Foundation GUID saved on localStorage &lt;async, static&gt; start() Starts foundation stack and get it ready to use. Starts foundation stack and get it ready to use. it calls this.#startVitals() internally Source: foundation/Foundation.js, line 512 Returns: signature - Default methods signature format { error, data } Type object signature.error - Execution error Type string | object signature.data - Foundation data Type object × Search results Close Sponsored by WEB2 Solutions "},"LocalDatabaseTransport.html":{"id":"LocalDatabaseTransport.html","title":"Class: LocalDatabaseTransport","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Class: LocalDatabaseTransport LocalDatabaseTransport new LocalDatabaseTransport(config) Database transport for IndexedDB. Database transport for IndexedDB Parameters: Name Type Description config object Transport configuration Properties Name Type Description version number Database version. Same as IndexedDB database version. tables object Database tables. Dexie tables configuration. dbName string Database name. Same as IndexedDB database name. Author: Eduardo Perotta de Almeida Source: foundation/LocalDatabaseTransport.js, line 8 See: The Data Transport is set into the Foundation stack and it is consumed inside DataEntity to persist data locally. LocalDatabaseTransport extends Dexie as database handler for IndexedDB. See Dexie Example import LocalDatabaseTransport from './LocalDatabaseTransport' import { Schema } from './utils' const UserSchema = new Schema({ name: { type: String, required: true }, username: { type: String, required: true } }) const ProductSchema = new Schema({ // ... }) const dbName = 'MyDatabaseName' const localDataTransport = new LocalDatabaseTransport({ version: 1, // default 1 tables: {}, // default {} dbName }) // or const localDataTransport = new LocalDatabaseTransport({ dbName }) localDataTransport.addSchema('User', UserSchema) localDataTransport.addSchema('Product', ProductSchema) await localDataTransport.connect() const Biden = await localDataTransport.table('User').add({ name: 'Joe Biden', username: 'biden'}) const Ferrari = await localDataTransport.table('Product').add({ name: 'Ferrari', vendor: 'Ferrari', price_cost: 3000000}) Extends dexie Methods &lt;static&gt; addSchema(schemaName, schema) A a Data Schema into the Schema tree. A a Data Schema into the Schema tree Parameters: Name Type Description schemaName string The schema name. Same as Entity name. schema object A valid mongoose like schema Source: foundation/LocalDatabaseTransport.js, line 90 Returns: schema - The schema enty from inside the Schema tree Type object Example const UserSchema = new Schema({ name: { type: String, required: true }, username: { type: String, required: true } }) localDataTransport.addSchema('User', UserSchema) &lt;async, static&gt; connect() Setup connection to local database. Setup connection to local database Source: foundation/LocalDatabaseTransport.js, line 114 Returns: Foundation GUID saved on localStorage signature - Default methods signature format { error, data } Type object signature.error - Execution error information Type string | object signature.data - Connection information Type object Example await localDataTransport.connect() × Search results Close Sponsored by WEB2 Solutions "},"module-utils.html":{"id":"module-utils.html","title":"Module: utils","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Module: utils Author: Eduardo Perotta de Almeida Source: foundation/utils.js, line 3 Methods &lt;static&gt; createMethodSignature(error, data) createMethodSignature Create default signature method object. createMethodSignature Create default signature method object Parameters: Name Type Description error string | object The string or error object if have any data object | array | number | string | boolean Information about method execution Source: foundation/utils.js, line 18 Returns: signature - Default methods signature format { error, data } Type object signature.error - Execution error Type string | object signature.data - Execution data Type object | array | number | string | boolean &lt;static&gt; getSearchTokenStream() getSearchTokenStream generates a lunr search token. getSearchTokenStream generates a lunr search token. See lunr search Source: foundation/utils.js, line 96 Returns: token Type array &lt;static&gt; GUID() GUID generates a Universally unique identifier string - alias to uuid(). GUID generates a Universally unique identifier string - alias to uuid() Source: foundation/utils.js, line 28 Returns: guid / uuid Type string &lt;static&gt; mongooseToDexieTableString() mongooseToDexieTableString convert given Mongoose schema to a Dexie Table columns configuration. mongooseToDexieTableString convert given Mongoose schema to a Dexie Table columns configuration. All columns inside returned configuration are indexed at IndexedDB prepend __id as local primary key and _id for remote primary key Source: foundation/utils.js, line 67 Returns: Dexie table configuration string Type string &lt;static&gt; toJSON(obj) toJSON - stringify and parse an object It uses native JSON internally. toJSON - stringify and parse an object It uses native JSON internally. Parameters: Name Type Description obj string | object Valid JSON object or string Source: foundation/utils.js, line 52 Returns: new JSON object Type object &lt;static&gt; uuid() uuid generates a Universally unique identifier string. uuid generates a Universally unique identifier string Source: foundation/utils.js, line 38 Returns: guid / uuid Type string × Search results Close Sponsored by WEB2 Solutions "},"Orders.html":{"id":"Orders.html","title":"Class: Orders","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Class: Orders Orders new Orders() React component consuming a Order Data Entity collection to feed a grid. React component consuming a Order Data Entity collection to feed a grid Author: Eduardo Perotta de Almeida Source: components/orders/index.js, line 65 Extends React.Component Members entity Entity name which this component represents to. Entity name which this component represents to Source: components/orders/index.js, line 72 foundation access to foundation instance. access to foundation instance Source: components/orders/index.js, line 76 onAddDocEventListener listen to add Order Data Entity change event on Data API. listen to add Order Data Entity change event on Data API Source: components/orders/index.js, line 160 onDeleteDocEventListener listen to delete Order Data Entity change event on Data API. listen to delete Order Data Entity change event on Data API Source: components/orders/index.js, line 170 onEditDocEventListener listen to edit Order Data Entity change event on Data API. listen to edit Order Data Entity change event on Data API Source: components/orders/index.js, line 165 pagination default pagination to list data. default pagination to list data Source: components/orders/index.js, line 80 state component state. component state Source: components/orders/index.js, line 87 Methods &lt;async, static&gt; componentDidMount() Called immediately after a component is mounted. Setting state here will trigger re-rendering. Once component is monted we are now ready to start listen to changes on Order data entity and get a list of order in database to fill out the state.orders Source: components/orders/index.js, line 122 Example componentDidMount() { const { Order } = this.foundation.data this.onAddDocEventListener = Order.on( 'add', handlerOnAddDocEventListener.bind(this) ) this.onEditDocEventListener = Order.on( 'edit', handlerOnEditDocEventListener.bind(this) ) this.onDeleteDocEventListener = Order.on( 'delete', handlerOnDeleteDocEventListener.bind(this) ) const { error, data } = await Order.find({}, { ...this.pagination }) if (!error) { this.setState({ orders: orders.data }) } } &lt;static&gt; componentWillUnmount() Called immediately before a component is destroyed. Perform any necessary cleanup in this method, such as cancelled network requests, or cleaning up any DOM elements created in componentDidMount. lets stop listen to Order Data State Change Events Source: components/orders/index.js, line 96 Example componentWillUnmount() { const { Order } = this.foundation.data Order.stopListenTo(this.onAddDocEventListener) Order.stopListenTo(this.onEditDocEventListener) Order.stopListenTo(this.onDeleteDocEventListener) } &lt;static&gt; handleDeleteOrder(event, __id) Event handler that Deletes a order Once component is monted we are now ready to start listen to changes on Order data entity and get a list of order in database to fill out the state.orders Parameters: Name Type Description event event The HTML event triggered on User interation __id number The primaryKey value of the record willing to be deleted Source: components/orders/index.js, line 181 Example handleDeleteOrder(e, ___id) { const { Order } = this.foundation.data e.preventDefault() swal({ title: 'Are you sure?', text: 'Once deleted, you will not be able to recover this!', icon: 'warning', buttons: true, dangerMode: true }).then(async (willDelete) =&gt; { if (willDelete) { const r = await Order.delete(___id) if (r.error) { swal('Database error', e.error.message, 'error') return } swal('Poof! The order has been deleted!', { icon: 'success' }) return &lt;Redirect to = '/dashboard' / &gt; } else { swal('The Order is safe!') } }) } // &lt;a color='primary' href='#' onClick={e =&gt; this.handleDeleteOrder(e, doc.__id)}&gt;[delete]&lt;/a&gt; &lt;async, static&gt; render() Component render function. Renders a grid of Orders Source: components/orders/index.js, line 244 × Search results Close Sponsored by WEB2 Solutions "},"OrdersAdd.html":{"id":"OrdersAdd.html","title":"Class: OrdersAdd","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Class: OrdersAdd OrdersAdd new OrdersAdd() React component that creates new a Order into the database. React component that creates new a Order into the database Author: Eduardo Perotta de Almeida Source: components/orders/OrdersAdd.js, line 27 Extends React.Component Members entity Entity name which this component represents to. Entity name which this component represents to Source: components/orders/OrdersAdd.js, line 33 foundation access to foundation instance. access to foundation instance Source: components/orders/OrdersAdd.js, line 37 pagination default pagination to list data. default pagination to list data Source: components/orders/OrdersAdd.js, line 41 state component state. component state Source: components/orders/OrdersAdd.js, line 48 Methods &lt;static&gt; componentDidMount() Called immediately after a component is mounted. Setting state here will trigger re-rendering. Once component is monted we are now ready to get customer list to use on select html item. We could also listen to changes in Customer and change the select values based on those events Source: components/orders/OrdersAdd.js, line 60 Example async componentDidMount() { const { Customer } = this.foundation.data if (!this.state.toDashboard) { this.form = document.querySelectorAll('.needs-validation')[0] this.form.addEventListener('submit', this.handleFormSubmit, false) } const findCustomers = await Customer.find({}) if (!findCustomers) { return } if (findCustomers.data) { this.setState({ customers: findCustomers.data }) } } &lt;static&gt; handleChangeFieldValue(event) Event handler that change form field values and set it state Parameters: Name Type Description event event The HTML event triggered on User interation Source: components/orders/OrdersAdd.js, line 99 Example handleChangeFieldValue(e) { const { Customer } = this.foundation.data if (e.target) { if (e.target.value === null || e.target.value === 'null') { const copy = { ...orderObj } delete copy.amount // console.debug(copy) this.setState({ order: copy }) return } } const newHash = { ...this.state.order } if (e.target.id === 'amount') { newHash[e.target.id] = e.target.value } else if (e.target.id === 'name') { const { data, error } = await Customer.findById(e.target.value) if (error) { return } // console.error({ data, error }) newHash.customerId = data.__id newHash.name = data.name newHash.shipTo = data.address newHash.paymentMethod = data.cards[0] } // console.error(newHash) this.setState({ order: newHash }) } &lt;async, static&gt; handleFormSubmit(event) Event handler that handles the form submission Parameters: Name Type Description event event The HTML event triggered on User interation Source: components/orders/OrdersAdd.js, line 166 Example async handleFormSubmit(e) { const { Order } = this.foundation.data if (!this.form.checkValidity()) { // console.log('not validated') } e.preventDefault() e.stopPropagation() this.form.classList.add('was-validated') const doc = { ...this.state.order } const { data, error } = await Order.add(doc) if (error) { swal('Database error', error.message, 'error') return } this.setState({ toDashboard: true }) } &lt;async, static&gt; render() Component render function. Renders a form to create the Order data Source: components/orders/OrdersAdd.js, line 206 × Search results Close Sponsored by WEB2 Solutions "},"Products.html":{"id":"Products.html","title":"Class: Products","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Class: Products Products new Products() React component consuming a Product Data Entity collection to feed a grid. React component consuming a Product Data Entity collection to feed a grid Author: Eduardo Perotta de Almeida Source: components/products/index.js, line 62 Extends React.Component Members entity Entity name which this component represents to. Entity name which this component represents to Source: components/products/index.js, line 69 foundation access to foundation instance. access to foundation instance Source: components/products/index.js, line 73 onAddDocEventListener listen to add Product Data Entity change event on Data API. listen to add Product Data Entity change event on Data API Source: components/products/index.js, line 157 onDeleteDocEventListener listen to delete Product Data Entity change event on Data API. listen to delete Product Data Entity change event on Data API Source: components/products/index.js, line 167 onEditDocEventListener listen to edit Product Data Entity change event on Data API. listen to edit Product Data Entity change event on Data API Source: components/products/index.js, line 162 pagination default pagination to list data. default pagination to list data Source: components/products/index.js, line 77 state component state. component state Source: components/products/index.js, line 84 Methods &lt;async, static&gt; componentDidMount() Called immediately after a component is mounted. Setting state here will trigger re-rendering. Once component is monted we are now ready to start listen to changes on Product data entity and get a list of product in database to fill out the state.products Source: components/products/index.js, line 119 Example componentDidMount() { const { Product } = this.foundation.data this.onAddDocEventListener = Product.on( 'add', handlerOnAddDocEventListener.bind(this) ) this.onEditDocEventListener = Product.on( 'edit', handlerOnEditDocEventListener.bind(this) ) this.onDeleteDocEventListener = Product.on( 'delete', handlerOnDeleteDocEventListener.bind(this) ) const { error, data } = await Product.find({}, { ...this.pagination }) if (!error) { this.setState({ products: products.data }) } } &lt;static&gt; componentWillUnmount() Called immediately before a component is destroyed. Perform any necessary cleanup in this method, such as cancelled network requests, or cleaning up any DOM elements created in componentDidMount. lets stop listen to Product Data State Change Events Source: components/products/index.js, line 93 Example componentWillUnmount() { const { Product } = this.foundation.data Product.stopListenTo(this.onAddDocEventListener) Product.stopListenTo(this.onEditDocEventListener) Product.stopListenTo(this.onDeleteDocEventListener) } &lt;static&gt; handleDeleteProduct(event, __id) Event handler that Deletes a product Once component is monted we are now ready to start listen to changes on Product data entity and get a list of product in database to fill out the state.products Parameters: Name Type Description event event The HTML event triggered on User interation __id number The primaryKey value of the record willing to be deleted Source: components/products/index.js, line 178 Example handleDeleteProduct(e, ___id) { const { Product } = this.foundation.data e.preventDefault() swal({ title: 'Are you sure?', text: 'Once deleted, you will not be able to recover this!', icon: 'warning', buttons: true, dangerMode: true }).then(async (willDelete) =&gt; { if (willDelete) { const r = await Product.delete(___id) if (r.error) { swal('Database error', e.error.message, 'error') return } swal('Poof! The product has been deleted!', { icon: 'success' }) return &lt;Redirect to = '/dashboard' / &gt; } else { swal('The Product is safe!') } }) } // &lt;a color='primary' href='#' onClick={e =&gt; this.handleDeleteProduct(e, doc.__id)}&gt;[delete]&lt;/a&gt; &lt;async, static&gt; render() Component render function. Renders a grid of Products Source: components/products/index.js, line 241 × Search results Close Sponsored by WEB2 Solutions "},"ProductsAdd.html":{"id":"ProductsAdd.html","title":"Class: ProductsAdd","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Class: ProductsAdd ProductsAdd new ProductsAdd() React component that creates new a Product into the database. React component that creates new a Product into the database Author: Eduardo Perotta de Almeida Source: components/products/CustomersAdd.js, line 26 Extends React.Component Members entity Entity name which this component represents to. Entity name which this component represents to Source: components/products/CustomersAdd.js, line 32 foundation access to foundation instance. access to foundation instance Source: components/products/CustomersAdd.js, line 36 pagination default pagination to list data. default pagination to list data Source: components/products/CustomersAdd.js, line 40 state component state. component state Source: components/products/CustomersAdd.js, line 47 Methods &lt;static&gt; handleChangeFieldValue(event) Event handler that change form field values and set it state Parameters: Name Type Description event event The HTML event triggered on User interation Source: components/products/CustomersAdd.js, line 66 Example handleChangeFieldValue(e) { const newHash = { ...this.state.product } const name = e.target.id || e.target.name const value = e.target.value newHash[name] = value if (name === 'cards') { if (value !== '') { newHash[name] = [value] } else { newHash[name] = [] } } this.setState({ product: newHash }) } &lt;async, static&gt; handleFormSubmit(event) Event handler that handles the form submission Parameters: Name Type Description event event The HTML event triggered on User interation Source: components/products/CustomersAdd.js, line 103 Example async handleFormSubmit(e) { const { Product } = this.foundation.data if (!this.form.checkValidity()) { // console.log('not validated') } e.preventDefault() e.stopPropagation() this.form.classList.add('was-validated') const doc = { ...this.state.product } const { data, error } = await Product.add(doc) if (error) { swal('Database error', error.message, 'error') return } this.setState({ toDashboard: true }) } &lt;async, static&gt; render() Component render function. Renders a form to create the Product data Source: components/products/CustomersAdd.js, line 143 × Search results Close Sponsored by WEB2 Solutions "},"ProductsEdit.html":{"id":"ProductsEdit.html","title":"Class: ProductsEdit","body":" Agnostic Web Application Foundation Modules utils Classes ChartCustomersCustomersAddCustomersEditDataEntityFoundationLocalDatabaseTransportOrdersOrdersAddProductsProductsAddProductsEdit Class: ProductsEdit ProductsEdit new ProductsEdit() React component that edits a Product data by biding it to a form. React component that edits a Product data by biding it to a form Author: Eduardo Perotta de Almeida Source: components/products/CustomersEdit.js, line 28 Extends React.Component Members entity Entity name which this component represents to. Entity name which this component represents to Source: components/products/CustomersEdit.js, line 35 foundation access to foundation instance. access to foundation instance Source: components/products/CustomersEdit.js, line 39 pagination default pagination to list data. default pagination to list data Source: components/products/CustomersEdit.js, line 43 state component state. component state Source: components/products/CustomersEdit.js, line 50 Methods &lt;async, static&gt; componentDidMount() Called immediately after a component is mounted. Setting state here will trigger re-rendering. Once component is monted we are now ready to get the desired Product data in database and bind to state.product Source: components/products/CustomersEdit.js, line 62 Example async componentDidMount() { if (!this.state.toDashboard) { this.form = document.querySelectorAll('.needs-validation')[0] this.form.addEventListener('submit', this.handleFormSubmit, false) } const { match: { params } } = this.props const { Product } = this.foundation.data const { __id } = params this.#__id = __id const findProduct = await Product.findById(this.#__id) if (findProduct.error) { console.error('findProduct.error', findProduct.error) return } if (findProduct.data) { this.setState({ product: findProduct.data }) } } &lt;static&gt; handleChangeFieldValue(event) Event handler that change form field values and set it state Parameters: Name Type Description event event The HTML event triggered on User interation Source: components/products/CustomersEdit.js, line 108 Example handleChangeFieldValue(e) { const newHash = { ...this.state.product } const name = e.target.id || e.target.name const value = e.target.value newHash[name] = value if (name === 'cards') { if (value !== '') { newHash[name] = [value] } else { newHash[name] = [] } } this.setState({ product: newHash }) } &lt;async, static&gt; handleFormSubmit(event) Event handler that handles the form submission Parameters: Name Type Description event event The HTML event triggered on User interation Source: components/products/CustomersEdit.js, line 143 Example async handleFormSubmit(e) { const { Product } = this.foundation.data if (!this.form.checkValidity()) { // console.log('not validated') } e.preventDefault() e.stopPropagation() this.form.classList.add('was-validated') const doc = { ...this.state.product } const { data, error } = await Product.edit(this.#__id, doc) if (error) { swal('Database error', error.message, 'error') return } this.setState({ toDashboard: true }) } &lt;async, static&gt; render() Component render function. Renders a form to edit the Product data Source: components/products/CustomersEdit.js, line 183 × Search results Close Sponsored by WEB2 Solutions "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
